//>>built
define("gridx/modules/ColumnLock",["dojo/_base/kernel","dojo/_base/lang","../core/_Module","dojo/_base/declare","dojo/_base/array","dojo/_base/html","dojo/query"],function(_1,_2,_3,_4,_5,_6,_7){_4("gridx.modules.ColumnLock",_3,{name:"columnLock",count:0,load:function(_8,_9){this.count=this.arg("count");var _a=this,g=this.grid,_b=_6.body();_9.then(function(){_a.connect(g.body,"onAfterRow","_lockColumns");if(g.columnResizer){_a.connect(g.columnResizer,"onResize","_updateUI");}if(g.header){g.header.loaded.then(function(){_a._updateHeader();});}_a.loaded.callback();});},getAPIPath:function(){return {columnLock:this};},lock:function(_c){if(_c>=this.grid._columns.length){console.warn("Warning: lock count is larger than columns count, do nothing.");return;}this.unlock();this.count=_c;this._updateUI();},unlock:function(){var _d=_7(".dojoxGridxHeaderRowInner",this.grid.headerNode)[0];this._unlockColumns(_d);_5.forEach(this.grid.bodyNode.childNodes,this._unlockColumns,this);this.count=0;this._updateScroller();},_unlockColumns:function(_e){var r=_e.firstChild.rows[0];for(var i=0;i<this.count;i++){var _f=r.cells[i];_6.removeClass(_f,"dojoxGridxLockedCell");_6.style(_f,{height:"auto"});}_e.style.paddingLeft="0px";},_updateUI:function(){if(this.grid.header){this._updateHeader();}this._updateBody();this._updateScroller();this.grid.body.onRender();},_lockColumns:function(_10){if(!this.count){return;}var r=_10.firstChild.rows[0],i;for(i=0;i<this.count;i++){_1.style(r.cells[i],"height","auto");}var h=_1.contentBox(r.cells[r.cells.length-1]).h;var pl=0,_11=this.grid._columns;_1.style(r.cells[r.cells.length-1],"height",h+"px");for(i=0;i<this.count;i++){var _12=r.cells[i];_6.addClass(_12,"dojoxGridxLockedCell");_6.style(_12,{height:h+"px",left:pl+"px"});pl+=_12.offsetWidth;}_10.style.paddingLeft=pl+"px";},_updateHeader:function(){var _13=_7(".dojoxGridxHeaderRowInner",this.grid.headerNode)[0];this._lockColumns(_13);},_updateBody:function(){_5.forEach(this.grid.bodyNode.childNodes,this._lockColumns,this);},_updateScroller:function(){if(this.grid.hScroller){this.grid.hScroller.refresh();}}});return gridx.modules.ColumnLock;});