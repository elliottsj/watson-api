//>>built
define("gridx/modules/Pagination",["dojo/_base/declare","dojo/_base/array","../core/_Module"],function(_1,_2,_3){return _3.registerModule(_1("gridx.modules.Pagination",_3,{name:"pagination",forced:["body"],getAPIPath:function(){return {pagination:this};},rowMixin:{getPage:function(){return this.grid.pagination.pageOfIndex(this.index());},indexInPage:function(){return this.grid.pagination.indexInPage(this.index());}},load:function(){this._pageSize=this.arg("initialPageSize",this._pageSize,function(_4){return _4>0;});this._page=this.arg("initialPage",this._page,function(_5){return _5>=0;});this.connect(this.model,"onSizeChange","_onSizeChange");this.grid.body.autoChangeSize=false;this.model.when({},function(){this._updateBody();this.loaded.callback();},this);},pageSize:function(){return this._pageSize>0?this._pageSize:this.model.size();},pageCount:function(){return Math.ceil(this.model.size()/this.pageSize());},currentPage:function(){return this._page;},firstIndexInPage:function(_6){if(!_6&&_6!==0){_6=this._page;}else{if(!(_6>=0)){return -1;}}var _7=_6*this.pageSize();return _7<this.model.size()?_7:-1;},lastIndexInPage:function(_8){var _9=this.firstIndexInPage(_8);if(_9>=0){var _a=_9+this.pageSize()-1,_b=this.model.size();return _a<_b?_a:_b-1;}return -1;},pageOfIndex:function(_c){return Math.floor(_c/this.pageSize());},indexInPage:function(_d){return _d%this.pageSize();},filterIndexesInPage:function(_e,_f){var _10=this.firstIndexInPage(_f),end=this.lastIndexInPage(_f);return _10<0?[]:_2.filter(_e,function(_11){return _11>=_10&&_11<=end;});},gotoPage:function(_12){if(_12!==this._page&&this.firstIndexInPage(_12)>=0){var _13=this._page;this._page=_12;this._updateBody();this.onSwitchPage(this._page,_13);}},setPageSize:function(_14){var _15=this._pageSize;if(_14>=0&&_14!==_15){var _16=this.firstIndexInPage();var _17=-1;this._pageSize=_14;if(this._page>=this.pageCount()){_17=this._page;this._page=this.pageOfIndex(_16);}this._updateBody();this.onChangePageSize(this._pageSize,_15);if(_17>=0){this.onSwitchPage(this._page,_17);}}},onSwitchPage:function(){},onChangePageSize:function(){},_page:0,_pageSize:10,_updateBody:function(){var _18=this.model.size(),_19=this.pageSize(),_1a=this.firstIndexInPage();if(_18-_1a<_19){_19=_18-_1a;}this.grid.body.updateRootRange(_1a,_18-_1a<_19?_18-_1a:_19);this.grid.body.refresh();},_onSizeChange:function(_1b){if(_1b===0){this._page=0;this.grid.body.updateRootRange(0,0);}else{var _1c=this.firstIndexInPage();if(_1c<0){var _1d=this._page;this._page=this.pageOfIndex(_1b-1);if(_1d!==this._page){this.onSwitchPage(this._page,_1d);}}this._updateBody();}}}));});