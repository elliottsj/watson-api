//>>built
define("gridx/modules/VLayout",["dojo/_base/declare","dojo/_base/html","dojo/DeferredList","../core/_Module"],function(_1,_2,_3,_4){return _4.registerModule(_1("gridx.modules.VLayout",_4,{name:"vLayout",getAPIPath:function(){return {vLayout:this};},load:function(_5,_6){var _7=this;this.connect(this.grid,"_onResizeEnd",function(_8,ds){var d,dl=[];for(d in ds){dl.push(ds[d]);}(new _3(dl)).then(function(){_7.reLayout();});});if(this.grid.autoHeight){this.batchConnect([this.grid.body,"onRender","reLayout"]);}_6.then(function(){if(_7._defs&&_7._mods){(new _3(_7._defs)).then(function(){_7._layout();_7.loaded.callback();});}else{_7.loaded.callback();}});},register:function(_9,_a,_b,_c,_d){this._defs=this._defs||[];this._mods=this._mods||{};this._mods[_b]=this._mods[_b]||[];this._defs.push(_d||_9.loaded);this._mods[_b].push({p:_c||0,mod:_9,nodeName:_a});},reLayout:function(){var _e,_f=0,_10,g=this.grid;for(_e in this._mods){_10=g[_e];if(_10){_f+=_2.marginBox(_10).h;}}this._updateHeight(_f);},_layout:function(){var _11,_12=0,_13,i,mod,_14,g=this.grid;for(_11 in this._mods){_13=g[_11];if(_13){this._mods[_11].sort(function(a,b){return a.p-b.p;});for(i=0;i<this._mods[_11].length;++i){mod=this._mods[_11][i].mod;_14=this._mods[_11][i].nodeName;if(mod&&mod[_14]){_13.appendChild(mod[_14]);}}_12+=_2.marginBox(_13).h;}}this._updateHeight(_12);},_updateHeight:function(_15){var g=this.grid;if(g.autoHeight){g.vScroller.loaded.then(function(){var _16=g.bodyNode.lastChild;var _17=_16?_16.offsetTop+_16.offsetHeight:0;g.domNode.style.height=(_17+_15)+"px";g.mainNode.style.height=_17+"px";});}else{g.mainNode.style.height=(g.domNode.clientHeight-_15)+"px";}}}));});