//>>built
define("gridx/modules/dnd/Column",["dojo/_base/declare","dojo/_base/array","dojo/_base/html","dojo/_base/sniff","dojo/_base/query","./_Base","../../core/_Module"],function(_1,_2,_3,_4,_5,_6,_7){return _7.registerModule(_1("gridx.modules.dnd.Column",_6,{name:"dndColumn",required:["selectColumn","moveColumn"],type:"Column",accept:["grid/cols"],canDragIn:false,canDragOut:false,_extraCheckReady:function(_8){return this._selector.isSelected(_8.columnId);},_buildDndNodes:function(){var sb=[],_9=this._selectedColIds=this._selector.getSelected();_2.forEach(_9,function(_a){sb.push("<div id='",this.grid.id,"_dnditem_column_",_a,"' columnid='",_a,"'></div>");});return sb.join("");},_getDndCount:function(){return this._selectedColIds.length;},_beginAutoScroll:function(){this._autoScrollV=this.grid.autoScroll.vertical;this.grid.autoScroll.vertical=false;},_endAutoScroll:function(){this.grid.autoScroll.vertical=this._autoScrollV;},_calcTargetAnchorPos:function(_b,_c){var _d=_b.target,_e=this,_f=this.grid._columns;var ret={height:_c.h+"px"};var _10=function(n){var id=n.getAttribute("colid");var _11=_e.grid._columnsById[id].index;if(_e._selector.isSelected(id)){while(_11>0&&_e._selector.isSelected(_f[_11-1].id)){--_11;}n=_5(".dojoxGridxHeaderRow [colid='"+_f[_11].id+"']",_e.grid.headerNode)[0];}_e._target=n?_11:undefined;if(n){ret.left=(_3.position(n).x-_c.x)+"px";return ret;}return null;};while(_d){if(_3.hasClass(_d,"dojoxGridxCell")){return _10(_d);}_d=_d.parentNode;}var _12=_5(".dojoxGridxRow",this.grid.bodyNode)[0];var _13=_3.position(_12.firstChild);if(_13.x+_13.w<=_b.clientX){ret.left=(_13.x+_13.w-_c.x)+"px";this._target=_f.length;}else{if(_13.x>=_b.clientX){ret.left=(_13.x-_c.x)+"px";this._target=0;}else{if(_5(".dojoxGridxCell",_12).some(function(_14){var _15=_3.position(_14);if(_15.x<=_b.clientX&&_15.x+_15.w>=_b.clientX){_d=_14;return true;}})){return _10(_d);}}}return ret;},_onDropInternal:function(_16,_17){if(this._target>=0){var _18=_2.map(this._selectedColIds,function(_19){return this.grid._columnsById[_19].index;},this);this.grid.move.column.move(_18,this._target);}},_onDropExternalGrid:function(_1a,_1b,_1c){},_onDropExternalOther:function(_1d,_1e,_1f){}}));});