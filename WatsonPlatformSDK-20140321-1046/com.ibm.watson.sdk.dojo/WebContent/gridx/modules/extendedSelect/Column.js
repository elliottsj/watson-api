//>>built
define("gridx/modules/extendedSelect/Column",["dojo/_base/declare","dojo/_base/array","dojo/_base/query","dojo/_base/html","dojo/_base/lang","dojo/_base/Deferred","dojo/_base/sniff","dojo/mouse","dojo/keys","../../core/_Module","./_Base"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a,_b){return _a.registerModule(_1("gridx.modules.extendedSelect.Column",_b,{name:"selectColumn",optional:["columnResizer"],columnMixin:{select:function(){this.grid.select.column.selectById(this.id);return this;},deselect:function(){this.grid.select.column.deselectById(this.id);return this;},isSelected:function(){return this.grid._columnsById[this.id]._selected;}},getSelected:function(){return _2.map(_2.filter(this.grid._columns,function(_c){return _c._selected;}),function(_d){return _d.id;});},isSelected:function(){var _e=this.grid._columnsById;return _2.every(arguments,function(id){var _f=_e[id];return _f&&_f._selected;});},_type:"column",_markById:function(_10,_11){_2.forEach(_10,function(_12){var col=this.grid._columnsById[_12];if(col){col._selected=_11;this._doHighlight({column:col.index},_11);}},this);},_markByIndex:function(_13,_14){var i,col,_15=this.grid._columns;for(i=0;i<_13.length;++i){var arg=_13[i];if(_5.isArrayLike(arg)){var _16=arg[0];var end=arg[1];if(_16>=0&&_16<Infinity){var _17;if(!(end>=_16&&end<Infinity)){end=_15.length-1;}for(;_16<end+1;++_16){col=_15[_16];if(col){col._selected=_14;this._doHighlight({column:col.index},_14);}}}}else{if(arg>=0&&arg<Infinity){col=_15[arg];if(col){col._selected=_14;this._doHighlight({column:arg},_14);}}}}},_markAll:function(_18,_19){if(_19){_3(".dojoxGridxCell",this.grid.bodyNode).forEach(function(_1a){_4.addClass(_1a,"dojoxGridxColumnSelected");});}else{_3(".dojoxGridxColumnSelected",this.grid.domNode).forEach(function(_1b){_4.removeClass(_1b,"dojoxGridxColumnSelected");});}_2.forEach(this.grid._columns,function(col){col._selected=_19;});},_init:function(){var g=this.grid;this.batchConnect([g,"onHeaderCellMouseDown",function(e){if(_8.isLeft(e)){this._start({column:e.columnIndex},e.ctrlKey,e.shiftKey);}}],[g,"onHeaderCellMouseOver",function(e){this._highlight({column:e.columnIndex});}],[g,"onCellMouseOver",function(e){this._highlight({column:e.columnIndex});}],[g,_7("ff")<4?"onHeaderCellKeyUp":"onHeaderCellKeyDown",function(e){if(e.keyCode===_9.SPACE){this._start({column:e.columnIndex},e.ctrlKey,e.shiftKey);this._end();}}],[g.header,"onMoveToHeaderCell","_onMoveToHeaderCell"]);},_onRender:function(_1c,_1d){var i,j,end=_1c+_1d,bn=this.grid.bodyNode,_1e;var _1f=_2.filter(this.grid._columns,function(col){return col._selected;});for(i=_1f.length-1;i>=0;--i){for(j=_1c;j<end;++j){_1e=_3(["[visualindex=\"",j,"\"] [colid=\"",_1f[i].id,"\"]"].join(""),bn)[0];_4.addClass(_1e,"dojoxGridxColumnSelected");}}},_onMoveToHeaderCell:function(_20,e){if(e.shiftKey&&(e.keyCode===_9.LEFT_ARROW||e.keyCode===_9.RIGHT_ARROW)){var col=this.grid._columnsById[_20];this._start({column:col.index},e.ctrlKey,true);this._end();}},_isSelected:function(_21){var col=this.grid._columns[_21.column],id=col.id;return this._isRange?_2.indexOf(this._refSelectedIds,id)>=0:col._selected;},_beginAutoScroll:function(){this._autoScrollV=this.grid.autoScroll.vertical;this.grid.autoScroll.vertical=false;},_endAutoScroll:function(){this.grid.autoScroll.vertical=this._autoScrollV;},_doHighlight:function(_22,_23){var id=this.grid._columns[_22.column].id;var _24=_3("[colid=\""+id+"\"].dojoxGridxCell",this.grid.domNode);_24.forEach(function(_25){_4[_23?"addClass":"removeClass"](_25,"dojoxGridxColumnSelected");});},_focus:function(_26){if(this.grid.focus){var id=this.grid._columns[_26.column].id;var _27=_3("[colid=\""+id+"\"].dojoxGridxCell",this.grid.header.domNode)[0];this.grid.header._focusNode(_27);}},_addToSelected:function(_28,end,_29){if(!this._isRange){this._refSelectedIds=this.getSelected();}var a,b,i;if(this._isRange&&this._inRange(end.column,_28.column,this._lastEndItem.column)){_28=Math.min(end.column,this._lastEndItem.column);end=Math.max(end.column,this._lastEndItem.column);for(i=_28;i<=end;++i){var id=this.grid._columns[i].id;var _2a=_2.indexOf(this._refSelectedIds,id)>=0;this.grid._columns[i]._selected=_2a;}}else{a=Math.min(_28.column,end.column);end=Math.max(_28.column,end.column);_28=a;for(i=_28;i<=end;++i){this.grid._columns[i]._selected=_29;}}}}));});