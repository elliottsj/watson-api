//>>built
define("gridx/modules/filter/Filter",["dojo/_base/kernel","../../core/_Module","../../core/model/Mapper","dojo/_base/declare","dojo/_base/array","dojo/_base/lang"],function(_1,_2,_3){var _4=_2.registerModule(_1.declare("gridx.modules.filter.Filter",_2,{name:"filter",serverMode:false,setupFilterQuery:function(_5){return _5;},modelExtensions:[_3],getAPIPath:function(){return {filter:this};},load:function(_6){this.serverMode=_6.serverMode||this.serverMode;this.setFilter(_6.preFilter||this.grid.preFilter,true);this.loaded.callback();},setFilter:function(_7,_8){if(_7!=this._checker){this._checker=_7;if(this.serverMode){this.model.query(this.setupFilterQuery(_7.expr));}else{this.model.filter(_7);if(!_8&&this.grid.body){this.grid.body.refresh();}}}},getFilter:function(){return this._checker;}}));var _9=function(d,_a,_b){if(_1.isFunction(_b)){d=_b(d);}switch(_a){case "number":return parseFloat(d,10);case "boolean":return !!d;case "date":d=new Date(d);d.setHours(0);d.setMinutes(0);d.setSeconds(0);d.setMilliseconds(0);return d.getTime();case "time":d=new Date(d);d.setDate(1);d.setMonth(0);d.setFullYear(2000);return d.getTime();default:return String(d);}};var _c=function(_d,op,_e,_f){if(_1.isArray(_e)){_e=_1.map(_e,function(_10){return _10.expr;});}return _1.mixin(_d,{expr:_1.mixin({op:op,data:_e},_f||{})});};_4.column=function(_11,_12,_13,_14){_12=String(_12||"string").toLowerCase();return _c(function(row){return _9(row[_14?"rawData":"data"][_11],_12,_13);},_12,_11,{isCol:true});};_4.value=function(v,_15,_16){_15=String(_15||typeof v).toLowerCase();v=_9(v,_15,_16);return _c(function(){return v;},_15,v);};_4.isEmpty=function(_17,_18){return _c(function(){var v=_17.apply(0,arguments);if(_18){return _1.indexOf(_18,v)>=0;}else{return v===""||v==null;}},"isEmpty",[_17]);};_4.and=function(){var _19=_1.filter(arguments,function(arg){return _1.isFunction(arg);});return _c(function(){var _1a=arguments;return _1.every(_19,function(_1b){return _1b.apply(0,_1a);});},"and",_19);};_4.or=function(){var _1c=_1.filter(arguments,function(arg){return _1.isFunction(arg);});return _c(function(){var _1d=arguments;return _1.some(_1c,function(_1e){return _1e.apply(0,_1d);});},"or",_1c);};_4.not=function(_1f){return _c(function(){return !_1f.apply(0,arguments);},"not",[_1f]);};_4.equal=function(_20,_21){return _c(function(){return _20.apply(0,arguments)===_21.apply(0,arguments);},"equal",[_20,_21]);};_4.greater=function(_22,_23){return _c(function(){return _22.apply(0,arguments)>_23.apply(0,arguments);},"greater",[_22,_23]);};_4.less=function(_24,_25){return _c(function(){return _24.apply(0,arguments)<_25.apply(0,arguments);},"less",[_24,_25]);};_4.greaterEqual=function(_26,_27){return _c(function(){return _26.apply(0,arguments)>=_27.apply(0,arguments);},"greaterEqual",[_26,_27]);};_4.lessEqual=function(_28,_29){return _c(function(){return _28.apply(0,arguments)<=_29.apply(0,arguments);},"lessEqual",[_28,_29]);};_4.match=function(_2a,_2b){return _c(function(){return String(_2a.apply(0,arguments)).search(_2b)>=0;},"match",[_2a,{expr:{op:"regex",data:_2b}}]);};var _2c=function(_2d,_2e,_2f,_30,op){var _31=String(_2e.apply(0,_2d)),_32=String(_2f.apply(0,_2d));if(!_30){_31=_31.toLowerCase();_32=_32.toLowerCase();}return op(_31,_32);};_4.contain=function(_33,_34,_35){return _c(function(){return _2c(arguments,_33,_34,_35,function(_36,_37){return _36.indexOf(_37)>=0;});},"contain",[_33,_34]);};_4.startWith=function(_38,_39,_3a){return _c(function(){return _2c(arguments,_38,_39,_3a,function(_3b,_3c){return _3b.substring(0,_3c.length)===_3c;});},"startWith",[_38,_39]);};_4.endWith=function(_3d,_3e,_3f){return _c(function(){return _2c(arguments,_3d,_3e,_3f,function(_40,_41){return _40.substring(_40.length-_41.length)===_41;});},"endWith",[_3d,_3e]);};return _4;});