//>>built
define("gridx/modules/filter/FilterTooltip",["dojo","dijit","dijit/TooltipDialog","dijit/popup","dijit/Tooltip","./Filter","./FilterDialog","dojo/i18n!../../nls/FilterBar","dojo/_base/declare","dojo/_base/array","dojo/_base/event","dojo/_base/html"],function(_1,_2){_1.declare("gridx.modules.filter.FilterTooltip",_2.TooltipDialog,{grid:null,filterBar:null,postCreate:function(){this.inherited(arguments);this.filterBar=this.grid.filterBar;this.connect(this,"onClick","_onClick");this.connect(this,"onMouseEnter","_onMouseEnter");this.connect(this,"onMouseLeave","_onMouseLeave");_1.addClass(this.domNode,"dojoxGridxFilterTooltip");},show:function(_3){this.inherited(arguments);_2.popup.open({popup:this,x:_3.pageX,y:_3.pageY,padding:{x:-6,y:-3}});},hide:function(){this.inherited(arguments);_2.popup.close(this);},buildContent:function(){var fb=this.filterBar,_4=fb._nls,_5=fb.filterData;if(!_5||!_5.conditions.length){return;}var _6=_5.type==="all"?_4.statusTipHeaderAll:_4.statusTipHeaderAny;var _7=["<div class=\"dojoxGridxFilterTooltipTitle\"><b>Filter:</b> ",_6,"</div><table><tr><th>Column</th><th>Rule</th></tr>"];_1.forEach(_5.conditions,function(d,_8){var _9=_8%2?" class=\"dojoxGridxFilterTooltipOddRow\"":"";_7.push("<tr",_9,"><td>",(d.colId?this.grid.column(d.colId).name():"Any column"),"</td><td class=\"dojoxGridxFilterTooltipValueCell\">","<div>",fb._getRuleString(d.condition,d.value,d.type),"<img src=\""+this.grid._blankGif+"\" action=\"remove-rule\" title=\""+_4.removeRuleButton+"\" class=\"dojoxGridxFilterTooltipRemoveBtn\"/></div></td></tr>");},this);_7.push("</table>");this.set("content",_7.join(""));_1.toggleClass(this.domNode,"dojoxGridxFilterTooltipSingleRule",_5.conditions.length===1);},_onMouseEnter:function(e){this.isMouseOn=true;},_onMouseLeave:function(e){this.isMouseOn=false;this.hide();},_onClick:function(e){var tr=this._getTr(e),fb=this.filterBar;if(tr&&/^img$/i.test(e.target.tagName)){fb.filterData.conditions.splice(tr.rowIndex-1,1);tr.parentNode.removeChild(tr);fb.applyFilter(fb.filterData);_1.stopEvent(e);}else{this.filterBar.showFilterDialog();this.hide();}},_getTr:function(e){var tr=e.target;while(tr&&!/^tr$/i.test(tr.tagName)&&tr!==this.domNode){tr=tr.parentNode;}return (tr&&/^tr$/i.test(tr.tagName))?tr:null;}});});