//>>built
require({cache:{"url:idx/app/templates/LoginFrame.html":"<div class=\"${baseClass}\">\r\n    <div class=\"${baseClass}BoxWithShadow\">\r\n      <div class=\"${baseClass}Box\">\r\n\r\n       <div class=\"${baseClass}BoxInner\">\r\n   \r\n          <h1 data-dojo-attach-point=\"loginTitleNode\" class=\"${baseClass}Title\">${loginTitle}</h1>\r\n          \r\n          <iframe data-dojo-attach-point=\"_hiddenFrame\"\r\n          \t\t  style=\"visibility: hidden; display: none, width: 0px; height: 0px\" name=\"SubmitFrame${id}\"></iframe>\r\n          \r\n          <form data-dojo-type=\"dijit/form/Form\"\r\n          \t\tdata-dojo-attach-point=\"_form\" \r\n          \t\tdata-dojo-attach-event=\"onSubmit:_onFormSubmit\"\r\n          \t\tdata-dojo-props=\"autocomplete:'on',method:'post',name:'${formName}',action:'${formAction}',target:'SubmitFrame${id}'\">\r\n          \t\r\n            <div data-dojo-attach-point=\"loginSubtitleNode\" class=\"${baseClass}SubTitle\">${loginSubTitle}</div>\r\n\r\n            <input data-dojo-attach-point=\"loginUserName\" type=\"text\" data-dojo-type=\"idx/form/TextBox\" \r\n            \t   data-dojo-props=\"name:'${userFieldName}', required: true, value:'', intermediateChanges: false, autocomplete: '${_userAutoComplete}',\r\n            \t   \t\t\t\t\tlabel: '_', labelAlignment: 'vertical', instantValidate: false, regExp:'${regExp}'\"\r\n            \t   \t></input><br>\r\n            \r\n            <input type=\"password\" data-dojo-type=\"idx/form/TextBox\" data-dojo-attach-point=\"loginPassword\" \r\n            \t   data-dojo-props=\"id:'${id}Password', name:'${passwordFieldName}', required:'true', intermediateChanges: false, autocomplete: '${_pwdAutoComplete}',\r\n            \t   \t\t\t\t\tlabel: '_', labelAlignment: 'vertical', instantValidate: false,\r\n            \t   \t\t\t\t\tvalue:'', 'class': '${baseClass}Field', regExp:'${regExp}'\"\r\n            \t   \t></input>\r\n\t\t\t<div data-dojo-attach-point=\"containerNode\"></div>\r\n\r\n            <div data-dojo-attach-point=\"inactivityMessageNode\" class=\"idxLoginFrameInactivityMessage\">${inactivityMessage}</div>\r\n            \r\n\r\n            <div class=\"${baseClass}ButtonBar\">\r\n              <button data-dojo-type=\"dijit.form.Button\" data-dojo-attach-point=\"loginButton\" data-dojo-attach-event=\"onClick:_onSubmitClick\"\r\n              \t\t  data-dojo-props=\"name:'login'\">${labelSubmitButton}</button>\r\n              <button data-dojo-type=\"dijit.form.Button\" data-dojo-attach-point=\"cancelButton\" data-dojo-attach-event=\"onClick:_onCancelClick\"\r\n              \t\t  data-dojo-props=\"name:'cancel', 'style':'visibility:hidden;display:none;'\">${labelCancelButton}</button>\r\n            </div>\r\n          </form>\r\n            \r\n          <div data-dojo-attach-point=\"copyrightNode\" class=\"${baseClass}Copyright\">${loginCopyright}</div>\r\n\r\n       </div>\r\n       \r\n      </div>\r\n      <div class=\"${baseClass}ShadowTop\"><div class=\"${baseClass}ShadowInner\"></div></div>\r\n      <div class=\"${baseClass}ShadowMiddle\"><div class=\"${baseClass}ShadowInner\"></div></div>\r\n      <div class=\"${baseClass}ShadowBottom\"><div class=\"${baseClass}ShadowInner\"></div></div>\r\n    </div>\r\n    \r\n\t<div data-dojo-attach-point=\"invalidLoginDialog\" data-dojo-type=\"dijit/Dialog\" data-dojo-props=\"title:'${invalidMessageTitle}', 'style':'display:none;'\">\r\n\t\t<div class=\"dijitDialogPaneContentArea\" style=\"width: 350px; height: 90px; overflow: auto;\">\r\n\t\t\t<table role=\"presentation\">\r\n\t\t\t\t<tr>\r\n\t\t\t\t\t<td><div class=\"idxDialogIconError\" /></td>\r\n\t\t\t\t\t<td><span data-dojo-attach-point=\"invalidMessageNode\" class='idxDialogIconText'>${invalidMessage}</span></td>\r\n\t\t\t\t</tr>\r\n\t\t\t</table>\t\t\r\n\t\t</div>\t\t\t\r\n\t\t<div class=\"dijitDialogPaneActionBar\">\r\n\t\t\t<button data-dojo-attach-point=\"dialogOKButton\" data-dojo-type=\"dijit/form/Button\" data-dojo-props=\"type: 'submit', label: '${labelOkButton}'\" ></button>\t\r\n\t\t</div>\r\n\t</div>\r\n\t\r\n</div>\r\n"}});define("idx/app/LoginFrame",["dojo/_base/declare","dojo/_base/lang","dojo/keys","dojo/aspect","dojo/Deferred","dojo/when","dojo/promise/Promise","dojo/promise/all","dijit/_Widget","dijit/_TemplatedMixin","dijit/_WidgetsInTemplateMixin","dijit/focus","dojo/query","dojo/dom-style","../string","../resources","dojo/text!./templates/LoginFrame.html","dijit/form/Form","dijit/form/Button","dijit/form/ValidationTextBox","idx/form/TextBox","idx/widget/Dialog","dojo/i18n!./nls/LoginFrame","dojo/i18n!idx/widget/nls/ModalDialog","dojo/i18n!idx/widget/nls/base","dojo/i18n!./nls/base","dojo/i18n!../nls/base"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a,_b,_c,_d,_e,_f,_10,_11){return _1("idx.app.LoginFrame",[_9,_a,_b],{baseClass:"idxLoginFrame",templateString:_11,isContainer:true,formName:"",formAction:"",formTarget:"",loginTitle:"",loginSubTitle:"",labelSeparator:"",_setFormActionAttr:function(_12){this.formAction=_12;this._form.set("action",_12);},_setFormTargetAttr:function(_13){this.formTarget=_13;if(_f.nullTrim(_13)){this._form.set("target",_13);}else{this._form.set("target",this._hiddenFrame.name);}},_setLabelSeparatorAttr:function(_14){this.labelSeparator=_14;var _15=this.labelSeparator;if(this.domNode){_d(".idxLoginSeparator",this.domNode).forEach(function(_16,_17,_18){_16.innerHTML=_15;});}},labelUserName:"",userFieldName:"username",labelPassword:"",passwordFieldName:"password",userAutoComplete:false,passwordAutoComplete:false,attributeMap:_2.delegate(_9.prototype.attributeMap,{inactivityMessage:{node:"inactivityMessageNode",type:"innerHTML"},loginTitle:{node:"loginTitleNode",type:"innerHTML"},loginSubTitle:{node:"loginSubtitleNode",type:"innerHTML"},loginCopyright:{node:"copyrightNode",type:"innerHTML"}}),constructor:function(){this._allowingSubmit=false;this._userAutoComplete="off";this._pwdAutoComplete="off";},_setLabelUserNameAttr:function(_19){this.labelUserName=_19;var sep=_f.nullTrim(this.labelSeparator);if(_f.nullTrim(_19)){this.loginUserName.set("label",_19+(sep?sep:""));}else{this.loginUserName.set("label","");}},_setUserFieldNameAttr:function(_1a){this.userFieldName=_1a;if(_f.nullTrim(_1a)){this.loginUserName.set("name",_1a);}else{this.loginUserName.set("name","username");}},_setLabelPasswordAttr:function(_1b){this.labelPassword=_1b;var sep=_f.nullTrim(this.labelSeparator);if(_f.nullTrim(_1b)){this.loginPassword.set("label",_1b+(sep?sep:""));}else{this.loginPassword.set("label","");}},_setPasswordFieldNameAttr:function(_1c){this.passwordFieldName=_1c;if(_f.nullTrim(_1c)){this.loginPassword.set("name",_1c);}else{this.loginPassword.set("name","password");}},_setUserAutoCompleteAttr:function(_1d){this.userAutoComplete=_1d;this._userAutoComplete=(_1d)?"on":"off";if(this.loginUserName){this.loginUserName.set("autocomplete",this._userAutoComplete);}},_setPasswordAutoCompleteAttr:function(_1e){this.passwordAutoComplete=_1e;this._pwdAutoComplete=(_1e)?"on":"off";if(this.loginPassword){this.loginPassword.set("autocomplete",this._pwdAutoComplete);}},inactivityMessage:"",loginCopyright:"",labelSubmitButton:"",_setLabelSubmitButtonAttr:function(_1f){this.labelSubmitButton=_1f;this.loginButton.set("label",this.labelSubmitButton);},invalidMessage:"",invalidMessageTitle:"",_setInvalidMessageAttr:function(_20){this.invalidMessage=_20;this.loginUserName.set("invalidMessage",this.invalidMessage);this.loginUserName.set("missingMessage",this.invalidMessage);this.loginPassword.set("invalidMessage",this.invalidMessage);this.loginPassword.set("missingMessage",this.invalidMessage);this.invalidMessageNode.innerHTML=this.invalidMessage;},_setInvalidMessageTitleAttr:function(_21){this.invalidMessageTitle=_21;this.invalidLoginDialog.set("title",this.invalidMessageTitle);},labelOkButton:"",_setLabelOkButtonAttr:function(_22){this.labelOkButton=_22;this.dialogOKButton.set("label",_22);},regExp:".*",labelCancelButton:"",_setLabelCancelButtonAttr:function(_23){this.labelCancelButton=_23;this.cancelButton.set("label",this.labelCancelButton);},showCancelButton:false,_setShowCancelButtonAttr:function(b){if(b){_e.set(this.cancelButton.domNode,{visibility:"visible",display:"inline"});}else{_e.set(this.cancelButton.domNode,{visibility:"hidden",display:"none"});}},postMixInProperties:function(){this.inherited(arguments);var _24=_10.getResources("idx/app/LoginFrame",this.lang);if(!this.loginTitle){this.loginTitle=_24.loginTitle;}if(!this.labelUserName){this.labelUserName=_24.labelUserName;}if(!this.labelPassword){this.labelPassword=_24.labelPassword;}if(!this.labelSubmitButton){this.labelSubmitButton=_24.loginTitle;}if(!this.invalidMessage){this.invalidMessage=_24.invalidMessage;}if(!this.invalidMessageTitle){this.invalidMessageTitle=_24.invalidMessageTitle;}_24=_10.getResources("idx/widget/ModalDialog",this.lang);if(!this.labelOkButton){this.labelOkButton=_24.executeButtonLabel;}if(!this.labelCancelButton){this.labelCancelButton=_24.cancelButtonLabel;}if(!this.labelSeparator){this.labelSeparator=_10.getLabelFieldSeparator("idx/app/LoginFrame",this.lang);}},postCreate:function(){this.connect(this.loginUserName.domNode,"onkeypress",this._onKeyPress);this.connect(this.loginUserName,"onFocus",this._onUserFieldFocus);this.connect(this.loginUserName.focusNode,"onfocus",this._onUserFieldFocus);this.connect(this.loginPassword.domNode,"onkeypress",this._onKeyPress);this.connect(this.loginPassword,"onFocus",this._onPasswordFieldFocus);this.connect(this.loginPassword.focusNode,"onfocus",this._onPasswordFieldFocus);},startup:function(){this.inherited(arguments);var sep=_f.nullTrim(this.labelSeparator);this.loginUserName.set("label",this.labelUserName+(sep?sep:""));this.loginPassword.set("label",this.labelPassword+(sep?sep:""));this.loginUserName.set("invalidMessage",this.invalidMessage);this.loginUserName.set("missingMessage",this.invalidMessage);this.loginPassword.set("invalidMessage",this.invalidMessage);this.loginPassword.set("missingMessage",this.invalidMessage);},_onUserFieldFocus:function(){this._lastFocus=this.loginUserName;},_onPasswordFieldFocus:function(){this._lastFocus=this.loginPassword;},onFocus:function(){this.inherited(arguments);if(this._lastFocus){this._lastFocus.focus();this._lastFocus=null;}else{this.loginUserName.focus();}},_onKeyPress:function(e){this.inherited(arguments);if(e&&e.keyCode&&e.keyCode==_3.ENTER){this._onSubmitClick(e);}},_onFormSubmit:function(){if(this._allowingSubmit){this._allowingSubmit=false;return true;}else{return false;}},_onSubmitClick:function(e){var _25=this._lastFocus;var _26=this.loginUserName.value;if(_26&&_26!=""){_26=_26.replace(/^\s+|\s+$/g,"");this.loginUserName.set("value",_26);}var pwd=this.loginPassword.value;if(pwd&&pwd!=""){pwd=pwd.replace(/^\s+|\s+$/g,"");this.loginPassword.set("value",pwd);}var _27=this.loginPassword.isValid();var _28=this.loginUserName.isValid();this.loginPassword.focus();this.loginUserName.focus();if(!_28||!_27){this.loginButton.focus();this.invalidLoginDialog.show();var _29=null;var _2a=this;_29=_4.after(this.invalidLoginDialog,"onHide",function(){if(!_27){_2a.loginPassword.focus();_2a.loginPassword.validate(false);}if(!_28){_2a.loginUserName.focus();_2a.loginUserName.validate(false);}if(_29){_29.remove();}});}else{var d=this.onSubmit(this.loginUserName.value,this.loginPassword.value,this.loginForm);var _2a=this;_6(d,function(){var _2b=false;if((d==true)||(d==false)){_2b=d;}else{if((d instanceof _5)||(d instanceof _7)){_2b=d.isResolved();}else{_2b=true;}}if((_2b)&&(_f.nullTrim(_2a.formAction))){_2a._allowingSubmit=true;_2a._form.submit();_2a._allowingSubmit=false;}});}_25.focus();},onSubmit:function(_2c,_2d){return true;},_onCancelClick:function(e){return this.onCancel();},onCancel:function(){}});});