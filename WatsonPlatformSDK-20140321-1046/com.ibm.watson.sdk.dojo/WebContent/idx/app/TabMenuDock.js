//>>built
require({cache:{"url:idx/app/templates/TabMenuDock.html":"<div class=\"${baseClass}\">\r\n  <div class=\"${baseClass}Tabs\" data-dojo-attach-point=\"tabsNode\" \r\n  \t\trole=\"tablist\" wairole=\"tablist\"></div>\r\n</div>\r\n"}});define("idx/app/TabMenuDock",["dojo/_base/declare","./_Dock","dijit/_TemplatedMixin","dojo/_base/kernel","dojo/_base/lang","dojo/_base/array","dojo/aspect","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dijit/_base/wai","../util","./WorkspaceTab","dojo/text!./templates/TabMenuDock.html"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a,_b,_c,_d,_e){return _1("idx.app.TabMenuDock",[_2,_3],{showMenu:false,showOverflow:false,baseClass:"idxTabMenuDock",templateString:_e,tabWidgetClass:null,constructor:function(_f,_10){this._tabs=new Array();this._tabsByID=new Array();this._tabHandles=new Array();},destroy:function(){if(this._tabHandles){var _11=null;for(_11 in this._tabHandles){var _12=this._tabHandles[_11];_6.forEach(_12,function(_13){_13.remove();});delete this._tabHandles[_11];}}this.inherited(arguments);},buildRendering:function(){this.cssOptions=_c.getCSSOptions(this.baseClass+"Options",this.domNode);if(!this.cssOptions){this.cssOptions={tabWidget:"idx.app.WorkspaceTab",autoHeight:"true"};}if(this.cssOptions.autoHeight=="true"){this.cssOptions.autoHeight=true;}else{this.cssOptions.autoHeight=false;}this.tabWidgetClass=_d;this.autoHeight=this.cssOptions.autoHeight;this.inherited(arguments);},_doAddWorkspace:function(_14){var _15=0;var _16=0;for(_16=0;_16<this._tabs.length;_16++){var tab=this._tabs[_16];var box=_9.getMarginBox(tab.domNode);_15+=box.w;}var tab=new this.tabWidgetClass({workspace:_14,tabPosition:this._tabs.length});this._tabs.push(tab);this._tabsByID[_14.workspaceID]=tab;var _17=_7.after(tab,"onTabSelect",_5.hitch(this,this._selectWorkspaceTab),true);var _18=_7.after(tab,"onTabMouseOut",_5.hitch(this,this._onTabMouseOut),true);var _19=_7.after(tab,"onTabMouseOver",_5.hitch(this,this._onTabMouseOver),true);var _1a=new Array();this._tabHandles[_14.workspaceID]=_1a;_1a.push(_17);_1a.push(_18);_1a.push(_19);_8.place(tab.domNode,this.tabsNode,"last");tab.startup();if(_4._isBodyLtr()){_a.set(tab.domNode,{position:"absolute",left:""+_15+"px"});}else{_a.set(tab.domNode,{position:"absolute",right:""+_15+"px"});}this.applyTabStyles();return true;},_onTabMouseOut:function(_1b,tab,_1c){if(tab==this._hoverTab){this._hoverTab=null;this._hoverIndex=-1;}this.applyTabStyles();},_onTabMouseOver:function(_1d,tab,_1e){this._hoverIndex=_6.indexOf(this._tabs,tab);this._hoverTab=tab;this.applyTabStyles();},_selectWorkspaceTab:function(_1f,tab,_20){this.selectWorkspace(_20);},_doSelectWorkspace:function(_21,_22){var _23=this._tabsByID[_21.workspaceID];this._selectedTab=_23;this._selectedIndex=_6.indexOf(this._tabs,this._selectedTab);this.applyTabStyles();return true;},_doRemoveWorkspace:function(_24,_25){var tab=this._tabsByID[_24.workspaceID];var _26=_6.indexOf(this._tabs,tab);var _27=this._tabHandles[_24.workspaceID];_6.forEach(_27,function(_28){if(_28){_28.remove();}});tab.destroyRecursive();this._tabs.splice(_26,1);delete this._tabsByID[_24.workspaceID];delete this._tabHandles[_24.workspaceID];this.resize();if(_25){var _29=(this._tabs.length>_26)?_26:(_26-1);if(_29>=0){var _2a=this._tabs[_29];var _2b=_2a.get("workspace");this.selectWorkspace(_2b);}else{this._selectedIndex=-1;}}this.applyTabStyles();return true;},resize:function(){var _2c=0;var _2d=0;for(_2c=0;_2c<this._tabs.length;_2c++){var tab=this._tabs[_2c];var box=_9.getMarginBox(tab.domNode);if(_4._isBodyLtr()){_a.set(tab.domNode,{position:"absolute",left:""+_2d+"px"});}else{_a.set(tab.domNode,{position:"absolute",right:""+_2d+"px"});}_2d+=box.w;}if(this.autoHeight){var _2e=0;var _2c=0;for(_2c=0;_2c<this._tabs.length;_2c++){var tab=this._tabs[_2c];var _2f=_9.getMarginBox(tab.domNode);if(_2f.h>_2e){_2e=_2f.h;}}_a.set(this.domNode,{height:""+_2e+"px"});}},applyTabStyles:function(){var _30=0;for(_30=0;_30<this._tabs.length;_30++){var tab=this._tabs[_30];tab.setState(this._tabs.length,_30,this._selectedIndex,this._hoverIndex);if(_30==this._selectedIndex){_b.setWaiState(tab.tabNode,"selected","true");}else{_b.setWaiState(tab.tabNode,"selected","false");}}this.resize();}});});