//>>built
define("idx/bus/Subscriber",["dojo/_base/declare","../string"],function(_1,_2){return _1("idx.bus.Subscriber",null,{subscriberScopeFilter:"",subscriberScopeRegexp:false,constructor:function(){this._subscriptionBusTopic=null;this._subscriptionBusHandle=null;},startup:function(){this.subscriberStartup();},_setSubscriberScopeFilterAttr:function(_3){this.setSubscriberScopeFilter(_3,this.subscriberScopeRegexp);},_setSubscriberScopeRegexpAttr:function(_4){this.setSubscriberScopeFilter(this.subscriberScopeRegexp,_4);},setSubscriberScopeFilter:function(_5,_6){this.subscriberScopeFilter=idx.string.nullTrim(_5);this.subscriberScopeRegexp=_6;if((_5!=null)&&(_6)){this._subscriberScopeRegexp=new RegExp(_5,"g");}else{this._subscriberScopeRegexp=null;}},subscriberStartup:function(){this.setSubscriberScopeFilter(this.subscriberScopeFilter,this.subscriberScopeRegexp);this.subscribeToBus();},subscribeToBus:function(){if(this._subscriptionBusHandle){return;}var _7=idx.bus._getBusTopic(this);this._subscriptionBusTopic=_7.topic;this._subscriptionBusHandle=dojo.subscribe(_7.topic,this,this._handleAction);},unsubscribeFromBus:function(){if(!this._subscriptionBusHandle){return;}dojo.unsubscribe(this._subscriptionBusHandle);this._subscriptionBusHandle=null;this._subscriptionBusTopic=null;},_getSubscribedTopic:function(){return this._subscriptionBusTopic;},_handleBusMessage:function(_8){if(this.subscriberScopeFilter){if(!_8.scope){return;}if(this._subscriberScopeRegexp){if(_8.scope.match(this._subscriberScopeRegexp)!=_8.scope){return;}}else{if(_8.scope!=this.subscriberScope){return;}}}this.handleBusMessage(_8);},handleBusMessage:function(_9){}});});