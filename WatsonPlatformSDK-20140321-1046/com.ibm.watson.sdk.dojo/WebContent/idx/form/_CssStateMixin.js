//>>built
define("idx/form/_CssStateMixin",["dojo","dijit/dijit","dijit/_WidgetBase","dojo/_base/array","dojo/has","dojo/ready","dojo/on","dojo/_base/window","dijit/registry","dojo/dom","dojo/dom-class"],function(_1,_2,_3,_4,_5,_6,on,_7,_8,_9,_a){var _b=_1.declare("idx.form._CssStateMixin",[],{cssStateNodes:{},hovering:false,active:false,_applyAttributes:function(){_3.prototype._applyAttributes.apply(this,arguments);_1.forEach(["disabled","readOnly","checked","selected","focused","state","hovering","active","required"],function(_c){this.watch(_c,_1.hitch(this,"_setStateClass"));},this);for(var ap in this.cssStateNodes){this._trackMouseState(this[ap],this.cssStateNodes[ap]);}this._trackMouseState(this.stateNode,this.oneuiBaseClass);this._setStateClass();},_cssMouseEvent:function(_d){if(!this.disabled){switch(_d.type){case "mouseover":this._set("hovering",true);this._set("active",this._mouseDown);break;case "mouseout":this._set("hovering",false);this._set("active",false);break;case "mousedown":case "touchstart":this._set("active",true);break;case "mouseup":case "touchend":this._set("active",false);break;}}},_setStateClass:function(){var _e=this._getModifiedClasses(this.oneuiBaseClass);this._applyStateClass(this.stateNode,_e);_e=this._getModifiedClasses(this.baseClass);this._applyStateClass(this.domNode,_e);},_getModifiedClasses:function(_f){var _10=_f.split(" ");function _11(_12){_10=_10.concat(_1.map(_10,function(c){return c+_12;}),"dijit"+_12);};if(!this.isLeftToRight()){_11("Rtl");}var _13=this.checked=="mixed"?"Mixed":(this.checked?"Checked":"");if(this.checked){_11(_13);}if(this.state){_11(this.state);}if(this.selected){_11("Selected");}if(this.required){_11("Required");}if(this.disabled){_11("Disabled");}else{if(this.readOnly){_11("ReadOnly");}else{if(this.active){_11("Active");}else{if(this.hovering){_11("Hover");}}}}if(this.focused){_11("Focused");}return _10;},_applyStateClass:function(_14,_15){var _16={};_1.forEach(_14.className.split(" "),function(c){_16[c]=true;});if("_stateClasses" in _14){_1.forEach(_14._stateClasses,function(c){delete _16[c];});}_1.forEach(_15,function(c){_16[c]=true;});var _17=[];for(var c in _16){_17.push(c);}_14.className=_17.join(" ");_14._stateClasses=_15;},_subnodeCssMouseEvent:function(_18,_19,evt){if(this.disabled||this.readOnly){return;}var _1a=_19.split(/\s+/);function _1b(_1c){_4.forEach(_1a,function(_1d){_a.toggle(_18,_1d+"Hover",_1c);});};function _1e(_1f){_4.forEach(_1a,function(_20){_a.toggle(_18,_20+"Active",_1f);});};function _21(_22){_4.forEach(_1a,function(_23){_a.toggle(_18,_23+"Focused",_22);});};switch(evt.type){case "mouseover":_1b(true);break;case "mouseout":_1b(false);_1e(false);break;case "mousedown":case "touchstart":_1e(true);break;case "mouseup":case "touchend":_1e(false);break;case "focus":case "focusin":_21(true);break;case "blur":case "focusout":_21(false);break;}},_trackMouseState:function(_24,_25){_24._cssState=_25;}});_6(function(){function _26(evt){if(!_9.isDescendant(evt.relatedTarget,evt.target)){for(var _27=evt.target;_27&&_27!=evt.relatedTarget;_27=_27.parentNode){if(_27._cssState){var _28=_8.getEnclosingWidget(_27);if(_28){if(_27==_28.oneuiBaseNode){_28._cssMouseEvent(evt);}else{if(_27==_28.domNode){_28._cssMouseEvent(evt);}else{_28._subnodeCssMouseEvent(_27,_27._cssState,evt);}}}}}}};function _29(evt){evt.target=evt.srcElement;_26(evt);};var _2a=_7.body(),_2b=(_5("touch")?[]:["mouseover","mouseout"]).concat(["mousedown","touchstart","mouseup","touchend"]);_4.forEach(_2b,function(_2c){if(_2a.addEventListener){_2a.addEventListener(_2c,_26,true);}else{_2a.attachEvent("on"+_2c,_29);}});on(_2a,"focusin, focusout",function(evt){var _2d=evt.target;if(_2d._cssState&&!_2d.getAttribute("widgetId")){var _2e=_8.getEnclosingWidget(_2d);_2e._subnodeCssMouseEvent(_2d,_2d._cssState,evt);}});});return _b;});