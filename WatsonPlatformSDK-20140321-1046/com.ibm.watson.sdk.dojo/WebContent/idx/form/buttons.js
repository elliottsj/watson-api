//>>built
define("idx/form/buttons",["dojo/_base/lang","idx/main","dojo/string","dojo/dom-class","dojo/dom-attr","dojo/aspect","dojo/_base/event","dijit/form/Button","dojo/data/ItemFileReadStore","../string","../resources","dojo/i18n!../nls/base","dojo/i18n!./nls/base","dojo/i18n!./nls/buttons","../ext"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a,_b){var _c=_1.getObject("form.buttons",true,_2);_c._displayModes={labelOnly:{showIcon:false,showLabel:true,cssClass:"idxButtonLabelOnly"},iconOnly:{showIcon:true,showLabel:false,cssClass:"idxButtonIconOnly"},iconAndLabel:{showIcon:true,showLabel:true,cssClass:"idxButtonIconAndLabel"}};var _d=_c._displayModes;_c._buttonProfiles={standard:{cssClass:null},compact:{cssClass:"idxButtonCompact"}};var _e=_c._buttonProfiles;_c._buttonPlacements={primary:{cssClass:null,defaultDisplayMode:"iconAndLabel",defaultProfile:"standard"},secondary:{cssClass:"idxButtonSecondary",defaultDisplayMode:"labelOnly",defaultProfile:"standard"},toolbar:{cssClass:"idxButtonToolbar",defaultDisplayMode:"iconOnly",defaultProfile:"standard"},special:{cssClass:"idxButtonSpecial",defaultDisplayMode:"iconAndLabel",defaultProfile:"standard"}};var _f=_c._buttonPlacements;_c.setDefaultDisplayMode=function(_10,_11){var _12=_d[_10];if(!_12){throw new Error("Invalid mode display mode name: "+_10);}if(!_11){for(_11 in _f){_f[_11].defaultDisplayMode=_10;}}else{var _13=_f[_11];if(!_13){throw new Error("Invalid button placement name: "+_11);}_13.defaultDisplayMode=_10;}};_c.setDefaultProfile=function(_14,_15){var _16=_e[_14];if(!_16){throw new Error("Invalid mode profile name: "+_14);}if(!_15){for(_15 in _f){_f[_15].defaultProfile=_14;}}else{var _17=_f[_15];if(!_17){throw new Error("Invalid button placement: "+_17);}_17.defaultProfile=_14;}};_c._stdButtonTypes={close:{iconClass:"idxCloseIcon",labelKey:"closeLabel",titleKey:"closeTip"},configure:{iconClass:"idxConfigureIcon",labelKey:"configureLabel",titleKey:"configureTip"},edit:{iconClass:"idxEditIcon",labelKey:"editLabel",titleKey:"editTip"},filter:{iconClass:"idxFilterIcon",labelKey:"filterLabel",titleKey:"filterTip"},clearFilter:{iconClass:"idxClearFilterIcon",labelKey:"clearFilterLabel",titleKey:"clearFilterTip"},toggleFilter:{toggleButtonTypes:["filter","clearFilter"]},help:{iconClass:"idxHelpIcon",labelKey:"helpLabel",titleKey:"helpTip"},info:{iconClass:"idxInfoIcon",labelKey:"infoLabel",titleKey:"infoTip"},minimize:{iconClass:"idxMinimizeIcon",labelKey:"minimizeLabel",titleKey:"minimizeTip"},maximize:{iconClass:"idxMaximizeIcon",labelKey:"maximizeLabel",titleKey:"maximizeTip"},print:{iconClass:"idxPrintIcon",labelKey:"printLabel",titleKey:"printTip"},refresh:{iconClass:"idxRefreshIcon",labelKey:"refreshLabel",titleKey:"refreshTip"},restore:{iconClass:"idxRestoreIcon",labelKey:"restoreLabel",titleKey:"restoreTip"},maxRestore:{toggleButtonTypes:["maximize","restore"]},nextPage:{iconClass:"idxNextPageIcon",labelKey:"nextPageLabel",titleKey:"nextPageTip"},previousPage:{iconClass:"idxPreviousPageIcon",labelKey:"previousPageLabel",titleKey:"previousPageTip"},lastPage:{iconClass:"idxLastPageIcon",labelKey:"lastPageLabel",titleKey:"lastPageTip"},firstPage:{iconClass:"idxFirstPageIcon",labelKey:"firstPageLabel",titleKey:"firstPageTip"}};_c.getButtonTypes=function(){var _18=[];for(field in _c._stdButtonTypes){_18.push(field);}return _18;};_c.getButtonTypeStore=function(_19){var _1a={identifier:"value",label:"name",items:[]};if(_19){_1a.items.push({name:"[none]",value:" "});}for(field in _c._stdButtonTypes){_1a.items.push({name:field,value:field});}return new _9({data:_1a});};var _1b=_8.prototype;var _1c=_1b._setLabelAttr;var _1d=_1b._setIconClassAttr;var _1e=_1b._setShowLabelAttr;_1b._setLabelAttr=function(_1f){if((!this._started)&&(!("_explicitLabel" in this))&&(this.params)&&("label" in this.params)){this._explicitLabel=this.params.label;}var abt=this._applyingButtonType;this._applyingButtonType=false;if(!abt){this._explicitLabel=_1f;}else{var el=this._explicitLabel;if(_a.nullTrim(el)){this.label=el;_1f=el;}}if(_1c){var _20=this._setLabelAttr;this._setLabelAttr=_1c;this.set("label",_1f);this._setLabelAttr=_20;}else{this.label=_1f;if(this._attrToDom&&("label" in this.attributeMap)){this._attrToDom("label",_1f);}}if((!abt)&&(!_a.nullTrim(this.label))&&(this._buttonTypes)){var bt=this._buttonTypes[this._toggleIndex];this._applyButtonTypeLabel(bt);}};_1b._setIconClassAttr=function(_21){if((!this._started)&&(!("_explicitIconClass" in this))&&(this.params)&&("iconClass" in this.params)&&(this.params.iconClass!="dijitNoIcon")){this._explicitIconClass=this.params.iconClass;}var abt=this._applyingButtonType;this._applyingButtonType=false;if(!abt){_4.remove(this.domNode,"idxButtonIcon");if(_21!="dijitNoIcon"){this._explicitIconClass=_21;}}else{var eic=this._explicitIconClass;if(_a.nullTrim(eic)){this.iconClass=eic;_21=eic;_4.remove(this.domNode,"idxButtonIcon");}else{_4.add(this.domNode,"idxButtonIcon");}}if(_1d){var _22=this._setIconClassAttr;this._setIconClassAttr=_1d;this.set("iconClass",_21);this._setIconClassAttr=_22;}else{this.iconClass=_21;if(this._attrToDom&&("iconClass" in this.attributeMap)){this._attrToDom("iconClass",_21);}}if((!abt)&&(!_a.nullTrim(this.iconClass))&&(this._buttonTypes)){var bt=this._buttonTypes[this._toggleIndex];this._applyButtonTypeIconClass(bt);}};_1b._setShowLabelAttr=function(_23){if((!this._started)&&(this.params)&&("showLabel" in this.params)&&(!("_explicitShowLabel" in this))){this._explicitShowLabel=this.params.showLabel;}var adm=this._applyingDisplayMode;this._applyingDisplayMode=false;if(!adm){this._explicitShowLabel=_23;}if(_1e){var _24=this._setShowLabelAttr;this._setShowLabelAttr=_1e;this.set("showLabel",_23);this._setShowLabelAttr=_24;}else{this.showLabel=_23;}};var _25=_1b.idxAfterBuildRendering;_1b.idxAfterBuildRendering=function(){if(_25){_25.call(this);}if(this._displayMode){this._applyDisplayMode(this._displayMode);}if(this._placement){this._applyPlacement(this._placement);}if(this._profile){this._applyProfile(this._profile);}if((this.valueNode)&&(this.valueNode!=this.focusNode)&&(_4.contains(this.valueNode,"dijitOffScreen"))&&(!_a.nullTrim(_5.get(this.valueNode,"role")))&&(!_a.nullTrim(_5.get(this.valueNode,"wairole")))){_5.set(this.valueNode,{role:"presentation",wairole:"presentation"});}};_1.extend(_8,{idxBaseClass:"idxButtonDerived",buttonType:"",placement:"",displayMode:"",profile:"",_getIDXResources:function(){if(!this._idxResources){this._idxResources=_b.getResources("idx/form/buttons",this.lang);}return this._idxResources;},_removeButtonType:function(){var _26=("_explicitIconClass" in this)?this._explicitIconClass:"";var _27=("_explicitLabel" in this)?this._explicitLabel:"";this.set("iconClass",_26);this.set("label",_27);},_applyButtonTypeLabel:function(_28){var res=this._getIDXResources();var _29=res[_28.labelKey];if(!_29){_29="";}this._applyingButtonType=true;this.set("label",_29);this._applyingButtonType=false;},_applyButtonTypeIconClass:function(_2a){var _2b=_2a.iconClass;if(!_2b){_2b="";}this._applyingButtonType=true;this.set("iconClass",_2b);this._applyingButtonType=false;},_applyButtonTypeTitle:function(_2c){var res=this._getIDXResources();var _2d=res[_2c.titleKey];if(!_2d){_2d="";}this._applyingButtonType=true;this.set("title",_2d);this._applyingButtonType=false;},_applyButtonType:function(_2e){this._applyButtonTypeLabel(_2e);this._applyButtonTypeIconClass(_2e);this._applyButtonTypeTitle(_2e);},_applyDisplayModeShowLabel:function(_2f){this._applyingDisplayMode=true;this.set("showLabel",_2f);this._applyingDisplayMode=false;},_applyDisplayMode:function(_30){this._displayMode=_30;var _31=_30.showLabel;var _32=_30.showIcon;var _33=_30.cssClass;if(_33){_4.add(this.domNode,_33);}if(!_32){_4.add(this.domNode,"idxButtonHideIcon");}this._applyDisplayModeShowLabel(_31);},_removeDisplayMode:function(){if(!this._displayMode){return;}var _34=this._displayMode.showLabel;var _35=this._displayMode.showIcon;var _36=this._displayMode.cssClass;if(_36){_4.remove(this.domNode,_36);}if(!_35){_4.remove(this.domNode,"idxButtonHideIcon");}_34=("_explicitShowLabel" in this)?this._explicitShowLabel:true;this.set("showLabel",_34);},_applyPlacementDisplayMode:function(_37){var _38=_37.defaultDisplayMode;if(!_38){_38="";}this._applyingPlacement=true;this.set("displayMode",_38);this._applyingPlacement=false;},_applyProfile:function(_39){this._profile=_39;var _3a=_39.cssClass;if(_3a){_4.add(this.domNode,_3a);}},_removeProfile:function(){if(!this._profile){return;}var _3b=this._profile.cssClass;if(_3b){_4.remove(this.domNode,_3b);}},_applyPlacementProfile:function(_3c){var _3d=_3c.defaultProfile;if(!_3d){_3d="";}this._applyingPlacement=true;this.set("profile",_3d);this._applyingPlacement=false;},_applyPlacement:function(_3e){this._placement=_3e;var _3f=_3e.cssClass;if(_3f){_4.add(this.domNode,_3f);}this._applyPlacementDisplayMode(_3e);this._applyPlacementProfile(_3e);},_removePlacement:function(){if(!this._placement){return;}var _40=this._placement.cssClass;var _41=this._placement.defaultDisplayMode;if(_40){_4.remove(this.domNode,_40);}var _41=("_explicitDisplayMode" in this)?this._explicitDisplayMode:"";this.set("displayMode",_41);},_buttonTypeClick:function(e){var _42=this.buttonType;if(this._toggleButtonTypes&&(this._toggleButtonTypes.length>1)){_42=this._toggleButtonTypes[this._toggleIndex];}this.onButtonTypeClick(e,_42);this._toggleButtonType();},onButtonTypeClick:function(e,_43){},_buttonTypeDblClick:function(e){var _44=this.buttonType;if(this._toggleButtonTypes&&(this._toggleButtonTypes.length>1)){_44=this._toggleButtonTypes[this._toggleIndex];}this.onButtonTypeDblClick(e,_44);this._toggleButtonType();},onButtonTypeDblClick:function(e,_45){},_toggleButtonType:function(){if((!this._buttonTypes)||(this._buttonTypes.length<2)){return;}var _46=this._buttonTypes[this._toggleIndex];this._removeButtonType(_46);this._toggleIndex++;if(this._toggleIndex>=this._buttonTypes.length){this._toggleIndex=0;}var _47=this._buttonTypes[this._toggleIndex];this._applyButtonType(_47);},_setButtonTypeAttr:function(_48){if(!this._hasButtonTypeClickHandle){this._hasButtonTypeClickHandle=true;var _49=_1.hitch(this,this._buttonTypeClick);this.own(_6.after(this,"onClick",_49,true));}if(!this._hasButtonTypeDblClickHandle){this._hasButtonTypeDblClickHandle=true;var _49=_1.hitch(this,this._buttonTypeDblClick);this.own(_6.after(this,"onDblClick",_49,true));}this.buttonType=_3.trim(_48);var sbt=_c._stdButtonTypes;var bt=sbt[_48];if(this._buttonTypes){var _4a=this._buttonTypes[this._toggleIndex];this._buttonTypes=null;this._removeButtonType(_4a);}if(bt){if(bt.toggleButtonTypes){this._buttonTypes=[];var tbt=bt.toggleButtonTypes;for(var _4b=0;_4b<tbt.length;_4b++){var _4c=tbt[_4b];this._buttonTypes.push(sbt[_4c]);}this._toggleButtonTypes=bt.toggleButtonTypes;}else{this._buttonTypes=[bt];this._toggleButtonTypes=[this.buttonType];}this._toggleIndex=0;var _4a=this._buttonTypes[this._toggleIndex];this._applyButtonType(_4a);}else{this._buttonTypes=null;}},_setPlacementAttr:function(_4d){this._removePlacement();this.placement=_4d;if(this.placement){var _4e=_c._buttonPlacements[this.placement];if(_4e){this._applyPlacement(_4e);}}},_setDisplayModeAttr:function(_4f){if((!this._started)&&(!("_explicitDisplayMode" in this))&&(this.params)&&("displayMode" in this.params)){this._explicitDisplayMode=this.params.displayMode;}var ap=this._applyingPlacement;this._applyingPlacement=false;if(!ap){this._explicitDisplayMode=_4f;}else{var edm=this._explicitDisplayMode;if(_a.nullTrim(edm)){_4f=edm;this.displayMode=edm;}}this._removeDisplayMode();this.displayMode=_4f;if(this.displayMode){var _50=_c._displayModes[this.displayMode];this._displayMode=_50;if(_50){this._applyDisplayMode(_50);}}if((!ap)&&(!_a.nullTrim(this.displayMode))&&(this._placement)){this._applyPlacementDisplayMode(this._placement);}},_setProfileAttr:function(_51){if((!this._started)&&(!("_explicitProfile" in this))&&(this.params)&&("profile" in this.params)){this._explicitProfile=this.params.profile;}var ap=this._applyingPlacement;this._applyingPlacement=false;if(!ap){this._explicitProfile=_51;}else{var ep=this._explicitProfile;if(_a.nullTrim(ep)){_51=ep;this.profile=ep;}}this._removeProfile();this.profile=_51;if(this.profile){var _52=_c._buttonProfiles[this.profile];this._profile=_52;if(_52){this._applyProfile(_52);}}if((!ap)&&(!_a.nullTrim(this.profile))&&(this._placement)){this._applyPlacementProfile(this._placement);}},_killEvent:function(e){if(e){_7.stop(e);}}});return _c;});