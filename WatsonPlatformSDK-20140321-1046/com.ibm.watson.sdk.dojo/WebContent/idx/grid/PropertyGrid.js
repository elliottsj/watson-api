//>>built
require({cache:{"url:idx/grid/templates/PropertyGrid.html":"<div class=\"${baseClass}\" dojoAttachPoint=\"containerNode\">\r\n<div class=\"${baseClass}Hidden\" dojoAttachPoint=\"hiddenNode\"></div>\r\n<table class=\"${baseClass}Table\" dojoAttachPoint=\"propTable\">\r\n<tbody class=\"${baseClass}Body\" dojoAttachPoint=\"bodyNode\">\r\n</tbody>\r\n</table>\r\n</div>\r\n","url:idx/grid/templates/_PropertyRow.html":"<tr class=\"${baseClass} ${baseClass}${posClassSuffix} ${baseClass}${altClassSuffix}\">\r\n<th class=\"${baseClass}Label ${baseClass}Label${posClassSuffix} ${baseClass}Label${altClassSuffix}\"><span class=\"${baseClass}Label ${baseClass}Label${posClassSuffix} ${baseClass}Label${altClassSuffix}\" dojoAttachPoint=\"titleNode\"></span><span class=\"${baseClass}Sep ${baseClass}Sep${posClassSuffix} ${baseClass}Sep${altClassSuffix}\">${propertyGrid._resources.labelFieldSeparator}</span></th>\r\n<td class=\"${baseClass}Value ${baseClass}Value${posClassSuffix} ${baseClass}Value${altClassSuffix}\" dojoAttachPoint=\"valueNode\"></td>\r\n</tr>\r\n"}});define("idx/grid/PropertyGrid",["dojo/_base/declare","dijit/_Widget","dijit/_TemplatedMixin","dijit/_Container","dojo/_base/lang","dojo/_base/array","dojo/aspect","dojo/string","dojo/dom-construct","dojo/query","dijit/registry","../string","../util","../resources","./PropertyFormatter","dojo/text!./templates/PropertyGrid.html","dojo/text!./templates/_PropertyRow.html","dojo/NodeList-dom","dojo/i18n!../nls/base","dojo/i18n!./nls/base","dojo/i18n!./nls/PropertyGrid"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a,_b,_c,_d,_e,_f,_10,_11){var _12=new function(){};var _13=_a.NodeList;var _14=_1("idx.grid._PropertyRow",[_2,_3],{propertyName:"",propertyType:"",formatter:null,propertyGrid:null,label:"",rowIndex:0,rowCount:1,attributeMap:_5.delegate(dijit._Widget.prototype.attributeMap,{title:{node:"titleNode",type:"innerHTML"}}),baseClass:"idxPropertyRow",posClassSuffix:"Solo",altClassSuffix:"Even",templateString:_11,constructor:function(_15,_16){this._started=false;},destroy:function(){if(this._editHandle){this._editHandle.remove();delete this._editHandle;}if(this._changeHandle){this._changeHandle.remove();delete this._changeHandle;}if(this._preSaveHandle){this._preSaveHandle.remove();delete this._preSaveHandle;}if(this._postSaveHandle){this._postSaveHandle.remove();delete this._postSaveHandle;}if(this.formatter&&this._ownsFormatter){this.formatter.destroyRecursive();delete this.formatter;}this.inherited(arguments);},_setRowIndexAttr:function(_17){this.rowIndex=_17;},postMixInProperties:function(){this.inherited(arguments);var _18=_c.nullTrim(this.propertyType);var _19=this.propertyName;if(_18){_19=_19+"("+_18+")";}if(!this.formatter){this._ownsFormatter=true;this.formatter=new _f({properties:_19,propertyName:this.propertyName,propertyContainer:this.propertyGrid});}this.altClassSuffix=((this.rowIndex%2)==0)?"Even":"Odd";this.posClassSuffix=((this.rowCount==1)?"Solo":((this.rowIndex==0)?"First":((this.rowIndex==(this.rowCount-1))?"Last":"Middle")));},buildRendering:function(){this.inherited(arguments);},startup:function(){if(this._started){return;}if(!this._ownsFormatter){var _1a=new _13(this.formatter.domNode);_1a.orphan();}_9.place(this.formatter.domNode,this.valueNode,"last");if(this._ownsFormatter){this.formatter.startup();}this.inherited(arguments);this._changeHandle=_7.after(this.formatter,"onChange",_5.hitch(this.propertyGrid,"_onChange"),true);},hasEditors:function(){return (this.formatter.getChildren().length>0);},focus:function(){this.formatter.focus();},reformat:function(){var _1b=null;var _1c=this.propertyGrid._getLabel(this.propertyName);this.set("title",_1c);this.formatter.refresh();}});var _1d=_1("idx.grid.PropertyGrid",[_2,_3,_4],{data:null,properties:"",resources:null,rawLabels:false,labelKeyPrefix:"",labelKeySuffix:"",formatFunc:_12,editController:null,baseClass:"idxPropertyGrid",templateString:_10,constructor:function(_1e,_1f){this._started=false;this._formatters=[];this._rows=[];},destroy:function(){if(this._formatters){for(field in this._formatters){var _20=this._formatters[field];if(_20){_20.destroyRecursive();delete this._formatters[field];}}delete this_formatters;}var _21=_b.findWidgets(this.hiddenNode);_6.forEach(_21,function(_22){_22.destroyRecursive();delete _22;});this.inherited(arguments);},postMixInProperties:function(){_d.nullify(this,this.params,["formatFunc","labelKeyPrefix","labelKeySuffix"]);this.inherited(arguments);if(!this._rawResources){this._rawResources=null;this._resetResources();}},buildRendering:function(){this.inherited(arguments);},postCreate:function(){this.inherited(arguments);},startup:function(){if(this._started){return;}_6.forEach(this.getChildren(),this._setupChild,this);this.inherited(arguments);this._started=true;this._rebuildRows();this._registerEditController();},addChild:function(_23,_24){this.inherited(arguments);if(this._started){this._setupChild(_23);this._rebuildRows();}},removeChild:function(_25){this.inherited(arguments);if(this._started){if(typeof _25=="number"&&_25>0){_25=this.getChildren()[_25];}if(_25 instanceof _f){var _26=_25.get("propertyName");this._formatters[_26]=null;_25.set("propertyContainer",null);}this._rebuildRows();}},_setupChild:function(_27){this.inherited(arguments);var _28=new _13(_27.domNode);_28.orphan();_9.place(_27.domNode,this.hiddenNode,"last");if(_27 instanceof _f){var _29=_27.get("propertyName");this._formatters[_29]=_27;_27.set("propertyContainer",this);}},_setDataAttr:function(_2a){this.data=_2a;if(this._started){this._reformat();}},_setFormatFuncAttr:function(_2b){this.formatFunc=_2b;if(this._started){this._reformat();}},_setLabelKeyPrefixAttr:function(_2c){this.labelKeyPrefix=_2c;if(this._started){this._reformat();}},_setLabelKeySuffixAttr:function(_2d){this.labelKeySuffix=_2d;if(this._started){this._reformat();}},_setLangAttr:function(_2e){this.inherited(arguments);this.lang=_2e;this._resetResources();},_setResourcesAttr:function(_2f){this.resources=_2f;this._resetResources();},_getResourcesAttr:function(){return this._resources;},_setEditControllerAttr:function(_30){this.editController=dijit.byId(_30);if(this._preSaveHandle){this._preSaveHandle.remove();delete this._preSaveHandle;}if(this._postSaveHandle){this._postSaveHandle.remove();delete this._postSaveHandle;}if(this.editController){this._preSaveHandle=_7.after(this.editController,"onPreSave",_5.hitch(this,"_onPreSave"),true);this._postSaveHandle=_7.after(this.editController,"onPostSave",_5.hitch(this,"_onPostSave"),true);}if(!this._started){return;}this.onEditControllerChanged(_30);},_registerEditController:function(){if(!this._started){return;}if(this._editHandle){this._editHandle.remove();delete this._editHandle;}if(this.editController){this._editHandle=_7.after(this.editController,"onEdit",_5.hitch(this,"_onEdit"),true);}},onEditControllerChanged:function(_31){this._registerEditController();},_onEdit:function(){for(var _32=0;_32<this._rows.length;_32++){var row=this._rows[_32];if(row.hasEditors()){row.focus();break;}}},_onChange:function(_33,_34){if(this._started){this._reformat();}if(!this._saving){this.onChange(this.get("data"),this,_34);}},onChange:function(_35,_36,_37){},_onPreSave:function(){this._saving=true;},_onPostSave:function(_38,_39){this._saving=false;this.onChange(this.get("data"),this);},_resetResources:function(){var _3a=_e.getResources("idx/grid/PropertyGrid",this.lang);if(this.resources){var _3b=new Object();_5.mixin(_3b,_3a);_5.mixin(_3b,this.resources);this._resources=_3b;}else{this._resources=_3a;}if(!this._resources.labelFieldSeparator){this._resources.labelFieldSeparator=_e.getLabelFieldSeparator("idx/grid/PropertyGrid",this.lang);}if(this._started){this._reformat();}},_setPropertiesAttr:function(_3c){this.properties=_3c;this._properties=[];var _3d=0;if(_c.nullTrim(this.properties)){var _3e=this.properties.split(",");var _3d=0;for(_3d=0;_3d<_3e.length;_3d++){var _3f=_8.trim(_3e[_3d]);var _40=null;var _41=_3f.indexOf("(");var _42=_3f.indexOf(")");if((_41>=0)&&(_42==(_3f.length-1))){_40=_3f.substring(_41+1,_42);_40=_8.trim(_40);_3f=_8.trim(_3f.substring(0,_41));}this._properties.push({propName:_3f,propType:_40});}}this._rebuildRows();},_rebuildRows:function(){if(!this._started){return;}var _43=0;for(var _44 in this._formatters){var _45=this._formatters[_44];if(_45.domNode.parentNode==this.hiddenNode){continue;}var _46=new _13(_45.domNode);_46.orphan();_9.place(_45.domNode,this.hiddenNode,"last");}for(_43=0;_43<this._rows.length;_43++){this._rows[_43].destroyRecursive();_9.destroy(this._rows[_43].domNode);}this._rows=[];for(_43=0;_43<this._properties.length;_43++){var _47=this._properties[_43];var _44=_47.propName;var _48=_47.propType;var _49=null;var _45=this._formatters[_44];if(_45){_49=_45.get("title");}if(!_c.nullTrim(_49)){_49=this._getLabel(_44);}var _4a={propertyName:_44,propertyType:_48,propertyGrid:this,title:_49,rowIndex:_43,rowCount:this._properties.length};if(_45){_4a.formatter=_45;}this._rows[_43]=new _14(_4a);this._rows[_43].placeAt(this.bodyNode,"last");this._rows[_43].startup();}},_getLabelKeyPrefix:function(){if(this.labelKeyPrefix){return this.labelKeyPrefix;}var _4b=this._resources["labelKeyPrefix"];return (_4b)?_4b:"";},_getLabelKeySuffix:function(){if(this.labelKeySuffix){return this.labelKeySuffix;}var _4c=this._resources["labelKeySuffix"];return (_4c)?_4c:"";},_getLabel:function(_4d){if(this.rawLabels){return _4d;}var _4e=null;var _4f=this._getLabelKeyPrefix();var _50=this._getLabelKeySuffix();var _51=(_4f+_4d+_50);_4e=this._resources[_51];if(_4e&&_d.typeOfObject(_4e)!="string"){_4e=null;}if(!_4e){var _52=this._formatters[_4d];if(_52){_4e=_52.get("title");_4e=_c.nullTrim(_4e);}}if(!_4e){_4e=_c.propToLabel(_4d);}return _4e;},refresh:function(){if(this._started){this._reformat();}},_reformat:function(){var _53=0;for(_53=0;_53<this._rows.length;_53++){this._rows[_53].reformat();}}});_1d.PropertyRow=_14;return _1d;});