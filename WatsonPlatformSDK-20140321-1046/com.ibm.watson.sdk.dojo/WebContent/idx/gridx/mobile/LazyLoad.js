//>>built
define("idx/gridx/mobile/LazyLoad",["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/dom-construct","dojo/dom-class","dojo/query","dojo/Deferred","dojo/i18n!./nls/LazyLoad"],function(_1,_2,_3,_4,_5,_6,_7,_8){return _1(null,{pageSize:20,lastId:null,_buildBody:function(_9){this.inherited(arguments);var _a=_4.create("div",{className:"mobileGridxLoadMoreWrapper"},this.bodyPane.containerNode,"last");this._buttonLoadMore=_4.create("button",{innerHTML:_8.loadMore,className:"mobileGridxLoadMoreButton mblButton"},_a,"last");this.connect(this._buttonLoadMore,"onclick","loadMore");if(_9&&_9.length<this.pageSize){this._buttonLoadMore.style.display="none";}if(_9&&_9.length){this.lastId=_9[_9.length-1][this.store.idProperty];}},loadMore:function(){this._makeButtonBusy();var q=_2.mixin({"lastId":this.lastId,count:this.pageSize},this.query);var _b=this;this.store.query(q,this.queryOptions).then(_2.hitch(this,"_loadMoreComplete"),_2.hitch(this,"onError"));},_loadMoreComplete:function(_c){var _d=_c.items||_c;if(_d&&_d.length){var _e=_6(">.mobileGridxRow",this.bodyPane.containerNode);var _f=[];_3.forEach(_d,function(_10){_f.push(this._createRow(_10));},this);_4.place(_f.join(""),this._buttonLoadMore.parentNode,"before");this.lastId=_d[_d.length-1][this.store.idProperty];}this._cancelButtonBusy();if(_c.noMore){this._buttonLoadMore.style.display="none";}},onError:function(){this.inherited(arguments);this._cancelButtonBusy();},_makeButtonBusy:function(){var btn=this._buttonLoadMore;btn.innerHTML="<img src=\""+this._blankGif+"\" class=\"mobileGridxLoadingIcon\"/> "+_8.loading;btn.disabled=true;},_cancelButtonBusy:function(){var btn=this._buttonLoadMore;btn.innerHTML=_8.loadMore;btn.disabled=false;}});});