//>>built
var fs=require("fs");var path=require("path");var util=require("util");var exec=require("child_process").exec;function run(_1,_2){var _3=exec(_1,function(_4,_5,_6){if(_4!==null){}if(_2){_2();}});};var gridxDir=path.join(path.dirname(module.filename),"../../");var testsDir=path.join(gridxDir,"mobile/tests/");var demosDir=path.join(gridxDir,"mobile/demos/");if(!fs.existsSync(demosDir)){fs.mkdirSync(demosDir);}var layers=[];fs.readdir(testsDir,function(_7,_8){_8.forEach(function(_9){if(_9.match(/\.js$/)){var _a=""+_9.replace(/\.js$/,"");layers.push("\n\t\t'"+_a+"': {boot: false,customBase: true,include: ["+"\n\t\t\t'gridx/mobile/tests/"+_a+"'"+"\n\t\t\t,'dojo/selector/acme'"+"\n\t\t]}");}else{if(_9.match(/\.html$/)){writeDemoHtml(_9);}}});var _b=fs.readFileSync(path.join(gridxDir,"mobile/util/demos.profile.tpl.js"),"utf8");var to=path.join(gridxDir,"mobile/demos/profile.js");_b=_b.replace("${layers}",layers.join(","));fs.writeFileSync(to,_b,"utf8");var _c=path.join(gridxDir,"../dojo/dojo.js");run("node "+_c+" load=build action=release profile="+to);});function writeDemoHtml(_d){var to=path.join(demosDir,_d);var _e=fs.readFileSync(path.join(gridxDir,"mobile/tests/"+_d),"utf8");_e=_e.replace(/"support\//g,"\"../tests/support/");fs.writeFileSync(to,_e,"utf8");};