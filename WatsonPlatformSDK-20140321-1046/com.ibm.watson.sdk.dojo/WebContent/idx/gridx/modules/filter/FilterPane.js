//>>built
require({cache:{"url:idx/gridx/templates/FilterPane.html":"<ul class=\"gridxFilterPaneForm\">\n\t<li><label id=\"${id}_ColumnLabel\" for=\"${id}_ColumnSelect\">${i18n.columnSelectLabel}</label></li>\n\t<li name=\"sltColumn\">\n\t\t<div data-dojo-type=\"dijit.form.Select\" id=\"${id}_ColumnSelect\" aria-labelledby=\"${id}_ColumnLabel\" style=\"width:100%;\"></div>\n\t</li>\n\t<li><label id=\"${id}_ConditionLabel\" for=\"${id}_ConditionSelect\">${i18n.conditionSelectLabel}</label></li>\n\t<li name=\"sltCondition\">\n\t\t<div data-dojo-type=\"dijit.form.Select\" id=\"${id}_ConditionSelect\" style=\"width:100%;\" aria-labelledby=\"${id}_ConditionLabel\"></div>\n\t</li>\n\t<li><label id=\"${id}_ValueLabel\">${i18n.valueBoxLabel}</label></li>\n\t\n\t<li class=\"gridxFilterPaneFieldWrapper gridxFilterPaneTextWrapper\">\n\t\t<input type=\"text\" data-dojo-type=\"dijit.form.TextBox\" intermediateChanges=\"true\"\n\t\t style=\"width:100%;\" aria-labelledby=\"${id}_ValueLabel\"/>\n\t</li>\n\t\n<!--            dropDownClass=\"gridx.modules.filter.DistinctComboBoxMenu\"-->\n\t<li class=\"gridxFilterPaneFieldWrapper gridxFilterPaneComboWrapper\">\n\t\t<input type=\"text\" data-dojo-type=\"dijit.form.ComboBox\" \n\t\t\tintermediateChanges=\"true\" autoComplete=\"false\" queryExpr=\"*${i18n.startsWithExpr}\" \n\t\t\tstyle=\"width:100%;\"  aria-labelledby=\"${id}_ValueLabel\"/>\n\t</li>\n\t\n\t<li class=\"gridxFilterPaneFieldWrapper gridxFilterPaneNumberWrapper\">\n\t\t<input type=\"text\" data-dojo-type=\"dijit.form.NumberTextBox\"  aria-labelledby=\"${id}_ValueLabel\" intermediateChanges=\"true\" style=\"width:100%;\"/>\n\t</li>\n\t\n\t<li class=\"gridxFilterPaneFieldWrapper gridxFilterPaneDateWrapper\">\n\t\t<div data-dojo-type=\"dijit.form.DateTextBox\" aria-labelledby=\"${id}_ValueLabel\" intermediateChanges=\"true\" style=\"width: 100%\"></div>\n\t</li>\n\t\n\t<li class=\"gridxFilterPaneFieldWrapper gridxFilterPaneDateRangeWrapper\">\n\t\t<div data-dojo-type=\"dijit.form.DateTextBox\" style=\"width:44%; float: left;\" intermediateChanges=\"true\"\n\t\t\t aria-label=\"${i18n.beginDateRangeLabel}\"></div>\n\t\t<div style=\"width:10%; text-align: center; float: left;\">${i18n.rangeTo}</div>\n\t\t<div data-dojo-type=\"dijit.form.DateTextBox\" style=\"width:44%; float: right;\" intermediateChanges=\"true\"\n\t\t\t aria-label=\"${i18n.endDateRangeLabel}\"></div>\n\t</li>\n\t\n\t<li class=\"gridxFilterPaneFieldWrapper gridxFilterPaneTimeWrapper\">\n\t\t<div data-dojo-type=\"dijit.form.TimeTextBox\" aria-labelledby=\"${id}_ValueLabel\" style=\"width: 100%\" intermediateChanges=\"true\"></div>\n\t</li>\n\t\n\t<li class=\"gridxFilterPaneFieldWrapper gridxFilterPaneTimeRangeWrapper\">\n\t\t<div data-dojo-type=\"dijit.form.TimeTextBox\" style=\"width:44%; float: left;\" intermediateChanges=\"true\"\n\t\t\t aria-label=\"${i18n.beginTimeRangeLabel}\"></div>\n\t\t<div style=\"text-align: center; float: left; width: 10%;\">${i18n.rangeTo}</div>\n\t\t<div data-dojo-type=\"dijit.form.TimeTextBox\" style=\"width:44%; float: right;\" intermediateChanges=\"true\"\n\t\t\t aria-label=\"${i18n.endTimeRangeLabel}\"></div>\n\t</li>\n\t\n\t<li class=\"gridxFilterPaneFieldWrapper gridxFilterPaneRadioWrapper\">\n\t\t<span style=\"width:49%; float:left;\">\n\t\t\t<div data-dojo-type=\"dijit.form.RadioButton\" aria-label=\"${i18n.radioTrueLabel}\" checked=\"true\"></div><span>${i18n.trueLabel}</span>\n\t\t</span>\n\t\t<span style=\"width:49%; float: right;\">\n\t\t\t<div data-dojo-type=\"dijit.form.RadioButton\" aria-label=\"${i18n.radioFalseLabel}\"></div><span>${i18n.falseLabel}</span>\n\t\t</span>\n\t</li>\n\t\n\t<li class=\"gridxFilterPaneFieldWrapper gridxFilterPaneSelectWrapper\">\n\t\t<div data-dojo-type=\"dijit.form.Select\" aria-labelledby=\"${id}_ValueLabel\" style=\"width: 100%\"></div>\n\t</li>\n</ul>\n"}});define("idx/gridx/modules/filter/FilterPane",["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/dom-construct","dojo/dom-class","dojo/string","dojo/query","dijit/registry","dojox/html/ellipsis","dojox/html/metrics","./DistinctComboBoxMenu","../Filter","dojo/text!../../templates/FilterPane.html","dojo/i18n!../../nls/FilterBar","dijit/layout/ContentPane","dijit/form/Select","dijit/form/TextBox","dijit/form/DateTextBox","dijit/form/TimeTextBox","dijit/form/RadioButton","dijit/form/NumberTextBox","dijit/form/ComboBox"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a,_b,_c,_d,_e,_f){var _10="_gridx_any_column_value_";function _11(_12){return _12==_10;};return _1([_f],{sltColumn:null,sltCondition:null,grid:null,title:_e.defaultRuleTitle,postCreate:function(){this.inherited(arguments);this.i18n=_e;this.set("content",_6.substitute(_d,this));this._initFields();this._initSltCol();this.connect(this.sltColumn,"onChange","_onColumnChange");this.connect(this.sltCondition,"onChange","_onConditionChange");this.comboText.dropDownClass=_b;this._onConditionChange();},getData:function(){var _13=this._getValue(),_14=this.sltColumn.get("value"),_15=this.sltCondition.get("value");if(_15==="isEmpty"||(_13!==null&&(_15!=="range"||(_13.start&&_13.end)))){return {colId:_11(_14)?"":_14,condition:_15,value:_15==="isEmpty"?"":_13,type:this._getType()};}else{return null;}},setData:function(_16){if(_16===null){return;}this.sltColumn.set("value",_16.colId,null);this._onColumnChange();var _17=this;window.setTimeout(function(){_17.sltCondition.set("value",_16.condition,null);_17._onConditionChange();_17._setValue(_16.value);},10);},close:function(){var ac=this._getContainer();if(ac.getChildren().length===4){ac._contentBox.w+=_a.getScrollbar().w;}if(this===ac.selectedChildWidget){var i=_3.indexOf(ac.getChildren(),this);if(i>0){ac.selectChild(ac.getChildren()[i-1]);}}ac.removeChild(this);_5.toggle(ac.domNode,"gridxFilterSingleRule",ac.getChildren().length===1);this.grid.filterBar._filterDialog._updateAccordionContainerHeight();},onChange:function(){},_getContainer:function(){return _8.byNode(this.domNode.parentNode.parentNode.parentNode);},_initFields:function(){this.sltColumn=_8.byNode(_7("li>table",this.domNode)[0]);this.sltCondition=_8.byNode(_7("li>table",this.domNode)[1]);var _18=this._fields=[this.tbSingle=_8.byNode(_7(".gridxFilterPaneTextWrapper > .dijitTextBox",this.domNode)[0]),this.tbNumber=_8.byNode(_7(".gridxFilterPaneNumberWrapper > .dijitTextBox",this.domNode)[0]),this.comboText=_8.byNode(_7(".gridxFilterPaneComboWrapper > .dijitComboBox",this.domNode)[0]),this.sltSingle=_8.byNode(_7(".gridxFilterPaneSelectWrapper > .dijitSelect",this.domNode)[0]),this.dtbSingle=_8.byNode(_7(".gridxFilterPaneDateWrapper > .dijitDateTextBox",this.domNode)[0]),this.dtbStart=_8.byNode(_7(".gridxFilterPaneDateRangeWrapper > .dijitDateTextBox",this.domNode)[0]),this.dtbEnd=_8.byNode(_7(".gridxFilterPaneDateRangeWrapper > .dijitDateTextBox",this.domNode)[1]),this.ttbSingle=_8.byNode(_7(".gridxFilterPaneTimeWrapper > .dijitTimeTextBox",this.domNode)[0]),this.ttbStart=_8.byNode(_7(".gridxFilterPaneTimeRangeWrapper > .dijitTimeTextBox",this.domNode)[0]),this.ttbEnd=_8.byNode(_7(".gridxFilterPaneTimeRangeWrapper > .dijitTimeTextBox",this.domNode)[1]),this.rbTrue=_8.byNode(_7(".gridxFilterPaneRadioWrapper .dijitRadio",this.domNode)[0]),this.rbFalse=_8.byNode(_7(".gridxFilterPaneRadioWrapper .dijitRadio",this.domNode)[1])];this.rbTrue.domNode.nextSibling.htmlFor=this.rbTrue.id;this.rbFalse.domNode.nextSibling.htmlFor=this.rbFalse.id;var _19="rb_name_"+Math.random();this.rbTrue.set("name",_19);this.rbFalse.set("name",_19);_3.forEach(_18,function(_1a){this.connect(_1a,"onChange","_onValueChange");},this);},_initSltCol:function(){var _1b=[{label:_e.anyColumnOption,value:_10}],fb=this.grid.filterBar,_1c=this.sltColumn;_3.forEach(this.grid.columns(),function(col){if(!col.isFilterable()){return;}_1b.push({value:col.id,label:col.name()});},this);_1c.addOption(_1b);},_initCloseButton:function(){var _1d=this._buttonWidget;var _1e=_4.create("span",{className:"gridxFilterPaneCloseButton",innerHTML:"<img src=\""+this._blankGif+"\"/>",tabIndex:0,title:"Close"},_1d.domNode,"last");this.connect(_1e,"onclick","close");_5.add(_1d.titleTextNode,"dojoxEllipsis");},_onColumnChange:function(){var _1f=this.sltColumn.get("value");var opt=this.grid.filterBar._getConditionOptions(_11(_1f)?"":_1f);var slt=this.sltCondition;if(slt.options&&slt.options.length){slt.removeOption(slt.options);}slt.addOption(_2.clone(opt));this._updateTitle();this._updateValueField();this.onChange();},_onConditionChange:function(){this._updateValueField();this._updateTitle();this.onChange();},_onValueChange:function(){this._updateTitle();this.onChange();},_getDataType:function(){var _20=this.sltColumn.get("value");var _21="string";if(!_11(_20)){_21=this.grid.column(_20).dataType();}return _21;},_getType:function(){var _22={"string":"Text",number:"Number",date:"Date",time:"Time","enum":"Select","boolean":"Radio"};var _23=_22[this._getDataType()];if("range"===this.sltCondition.get("value")){_23+="Range";}return _23;},_updateTitle:function(){if(!this._buttonWidget){return;}var _24,_25=this._getValue(),_26=this._getType(),_27=this.sltCondition.get("value"),_28=this._buttonWidget.titleTextNode;if(this._isValidValue(_25)&&(_27!=="range"||(_25.start&&_25.end))){_24=this.sltColumn.get("displayedValue")+" "+this.grid.filterBar._getRuleString(_27,_25,_26);}else{var _29=_3.indexOf(this._getContainer().getChildren(),this)+1;_24=_6.substitute(this.i18n.ruleTitleTemplate,{ruleNumber:_29});}_28.innerHTML=_24;_28.title=_24.replace(/<\/?span[^>]*>/g,"").replace("&nbsp;"," ");},_needComboBox:function(){var _2a=this.sltColumn.get("value");return this._getType()==="Text"&&!_11(_2a)&&this.grid._columnsById[_2a].field;},_updateValueField:function(){var _2b=this._getType(),_2c=this.sltColumn.get("value");var _2d=this._needComboBox();_3.forEach(["Text","Combo","Date","Number","DateRange","Time","TimeRange","Select","Radio"],function(k){_5.remove(this.domNode,"gridxFilterPane"+k);},this);_5.add(this.domNode,"gridxFilterPane"+(_2d?"Combo":_2b));var _2e=this.sltCondition.get("value")==="isEmpty";_3.forEach(this._fields,function(f){f.set("disabled",_2e);});var col=this.grid._columnsById[_2c];if(_2d){if(!this._dummyCombo){this._dummyCombo=new dijit.form.ComboBox({store:this.grid.store});}if(col.autoComplete!==false){_2.mixin(this.comboText,{store:this.grid.store,searchAttr:col.field,fetchProperties:{sort:[{attribute:col.field,descending:false}]}});}}if(_2b=="Select"){var _2f=this.sltSingle;_2f.removeOption(_2f.getOptions());_2f.addOption(_3.map(col.enumOptions||[],function(_30){return _2.isObject(_30)?_30:{label:_30,value:_30};}));this._updateTitle();}},_getValue:function(){var _31=this._getType(),_32=this._needComboBox();switch(_31){case "Text":return (_32?this.comboText:this.tbSingle).get("value")||null;case "Number":return isNaN(this.tbNumber.get("value"))?null:this.tbNumber.get("value");case "Select":return this.sltSingle.get("value")||null;case "Date":return this.dtbSingle.get("value")||null;case "DateRange":return {start:this.dtbStart.get("value"),end:this.dtbEnd.get("value")};case "Time":return this.ttbSingle.get("value")||null;case "TimeRange":return {start:this.ttbStart.get("value"),end:this.ttbEnd.get("value")};case "Radio":return !!this.rbTrue.get("checked");default:return null;}},_setValue:function(_33){if(!this._isValidValue(_33)){return;}var _34=this._getType(),_35=this._needComboBox();switch(_34){case "Text":(_35?this.comboText:this.tbSingle).set("value",_33);break;case "Number":this.tbNumber.set("value",_33);break;case "Select":this.sltSingle.set("value",_33);break;case "Date":this.dtbSingle.set("value",_33);break;case "DateRange":this.dtbStart.set("value",_33.start);this.dtbEnd.set("value",_33.end);break;case "Time":this.ttbSingle.set("value",_33);break;case "TimeRange":this.ttbStart.set("value",_33.start);this.ttbEnd.set("value",_33.end);break;case "Radio":if(_33){this.rbTrue.set("checked",true);}else{this.rbFalse.set("checked",true);}break;}},_isValidValue:function(_36){return _36!==null&&_36!=undefined;},uninitialize:function(){this.inherited(arguments);if(this._dummyCombo){this._dummyCombo.destroyRecursive();}}});});