//>>built
define("idx/gridx/modules/filter/FilterTooltip",["dojo","dijit/popup","dojo/_base/declare","dojo/string","dojo/i18n!../../nls/FilterBar","dijit/TooltipDialog","./FilterDialog","dijit/Tooltip","dojo/_base/array","dojo/_base/event","dojo/_base/html"],function(_1,_2,_3,_4,_5,_6){return _3(_6,{grid:null,filterBar:null,postCreate:function(){this.inherited(arguments);this.filterBar=this.grid.filterBar;this.connect(this,"onClick","_onClick");this.connect(this,"onMouseEnter","_onMouseEnter");this.connect(this,"onMouseLeave","_onMouseLeave");_1.addClass(this.domNode,"gridxFilterTooltip");_1.addClass(this.domNode,"dijitTooltipBelow");},show:function(_7){this.inherited(arguments);_2.open({popup:this,x:_7.pageX,y:_7.pageY,padding:{x:-6,y:-3}});},hide:function(){this.inherited(arguments);_2.close(this);},buildContent:function(){var fb=this.filterBar,_8=fb._nls,_9=fb.filterData;if(!_9||!_9.conditions.length){return;}var _a=_9.type==="all"?_8.statusTipHeaderAll:_8.statusTipHeaderAny;var _b=["<div class=\"gridxFilterTooltipTitle\"><b>${i18n.statusTipTitleHasFilter}</b> ",_a,"</div><table><tr><th>${i18n.statusTipHeaderColumn}</th><th>${i18n.statusTipHeaderCondition}</th></tr>"];_1.forEach(_9.conditions,function(d,_c){var _d=_c%2?" class=\"gridxFilterTooltipOddRow\"":"";_b.push("<tr",_d,"><td>",(d.colId?this.grid.column(d.colId).name():"${i18n.anyColumnOption}"),"</td><td class=\"gridxFilterTooltipValueCell\">","<div>",fb._getRuleString(d.condition,d.value,d.type),"<span action=\"remove-rule\" title=\"${i18n.removeRuleButton}\""," class=\"gridxFilterTooltipRemoveBtn\"><span class=\"gridxFilterTooltipRemoveBtnText\">x</span></span></div></td></tr>");},this);_b.push("</table>");this.i18n=_5;this.set("content",_4.substitute(_b.join(""),this));_1.toggleClass(this.domNode,"gridxFilterTooltipSingleRule",_9.conditions.length===1);},_onMouseEnter:function(e){this.isMouseOn=true;},_onMouseLeave:function(e){this.isMouseOn=false;this.hide();},_onClick:function(e){var tr=this._getTr(e),fb=this.filterBar;if(tr&&/^span$/i.test(e.target.tagName)){fb.filterData.conditions.splice(tr.rowIndex-1,1);tr.parentNode.removeChild(tr);fb.applyFilter(fb.filterData);_1.stopEvent(e);}else{this.filterBar.showFilterDialog();this.hide();}},_getTr:function(e){var tr=e.target;while(tr&&!/^tr$/i.test(tr.tagName)&&tr!==this.domNode){tr=tr.parentNode;}return (tr&&/^tr$/i.test(tr.tagName))?tr:null;}});});