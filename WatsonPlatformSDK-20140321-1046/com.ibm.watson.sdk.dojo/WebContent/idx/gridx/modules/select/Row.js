//>>built
define("idx/gridx/modules/select/Row",["dojo/_base/declare","dojo/_base/array","dojo/_base/sniff","dojo/_base/query","dojo/dom-class","dojo/keys","./_RowCellBase","../../core/_Module"],function(_1,_2,_3,_4,_5,_6,_7,_8){return _1(_7,{name:"selectRow",rowMixin:{select:function(){this.grid.select.row.selectById(this.id);return this;},deselect:function(){this.grid.select.row.deselectById(this.id);return this;},isSelected:function(){return this.grid.select.row.isSelected(this.id);}},triggerOnCell:false,treeMode:true,getSelected:function(){return this.model.getMarkedIds();},clear:function(_9){if(this.arg("enabled")){var _a=this.model;_2.forEach(_a.getMarkedIds(),function(id){if(id!==_9){_a.markById(id,0);}});_a.when();}},_type:"row",_init:function(){var t=this,g=t.grid;t.model.treeMarkMode("",t.arg("treeMode"));t.inherited(arguments);t.model._spTypes.select=1;t.batchConnect([g,"onRowClick",function(e){if((t.arg("triggerOnCell")&&!_5.contains(e.target,"gridxTreeExpandoIcon")&&!_5.contains(e.target,"gridxTreeExpandoInner"))||!e.columnId){t._select(e.rowId,g._isCopyEvent(e));}}],[g,_3("ff")<4?"onRowKeyUp":"onRowKeyDown",function(e){if((t.arg("triggerOnCell")||!e.columnId)&&e.keyCode==_6.SPACE){t._select(e.rowId,g._isCopyEvent(e));}}]);},_onMark:function(id,_b,_c,_d){if(_d=="select"){var t=this;t._highlight(id,_b);t[_b?"onSelected":"onDeselected"](t.grid.row(id,1),id);}},_highlight:function(_e,_f){var _10=_4("[rowid=\""+_e+"\"]",this.grid.mainNode),_11=_f&&_f!="mixed";if(_10.length){_10.forEach(function(_12){_5.toggle(_12,"gridxRowSelected",_11);_5.toggle(_12,"gridxRowPartialSelected",_f=="mixed");_12.setAttribute("aria-selected",!!_11);});this.onHighlightChange({row:parseInt(_10[0].getAttribute("visualindex"),10)},_f);}},_markById:function(id,_13){var m=this.model;if(m.treeMarkMode()&&!m.getMark(id)&&_13){_13="mixed";}m.markById(id,_13);m.when();},_onRender:function(_14,_15){var t=this,_16=t.model,end=_14+_15,i,id,_17;for(i=_14;i<end;++i){_17=t.grid.body.getRowNode({visualIndex:i});if(_17){id=_17.getAttribute("rowid");t._highlight(id,_16.getMark(id));}}}});});