//>>built
define("idx/layout/ListNavController",["dojo/_base/declare","dijit/layout/StackController","dojo/_base/lang","dojo/dom-attr","dojo/dom-class","dojo/dom-geometry","dojo/on","dojo/aspect","dijit/registry","dijit/focus","dojo/_base/array"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a,_b){var _c=_2.StackButton;var _d=_1("idx.layout._ListNavButton",[_c],{baseClass:"idxListNavButton",_clicked:function(_e){if(!this.checked){this.inherited("_clicked",arguments);}}});var _f=_1("idx.layout.ListNavController",[_2],{buttonWidget:_d,buttonWidgetClass:"idxListNavButton",idxBaseClass:"idxListNavController",constructor:function(_10,_11){},destroy:function(){if(this._firstFocus){this._firstFocus.remove();delete this._firstFocus;}if(this._firstAspect){this._firstAspect.remove();delete this._firstAspect;}this.inherited(arguments);},postCreate:function(){if(this.containerId){var _12=_9.byId(this.containerId);if(_12&&_12._started){this._containerAlreadyStarted=true;}}this.inherited(arguments);},startup:function(){this.inherited(arguments);if(this._containerAlreadyStarted){var _13=_9.byId(this.containerId);var _14=_13.getChildren();var _15=_13.selectedChildWidget;this.onStartup({children:_14,selected:_15});delete this._containerAlreadyStarted;}},onStartup:function(_16){this.inherited(arguments);var _17=_9.byId(this.containerId);if(_17){_17.resize();}},buildRendering:function(){this.inherited(arguments);_5.add(this.domNode,this.idxBaseClass);},resize:function(_18,_19){this.inherited(arguments);if(_18){_6.getMarginBox(this.domNode,_18);}},adjacent:function(_1a){var _1b=this.getChildren();var idx=_b.indexOf(_1b,this.pane2button[this._currentChild.id]),_1c=_1b[idx];var _1d;do{idx=(idx+(_1a?1:_1b.length-1))%_1b.length;_1d=_1b[idx];}while(_1d.disabled&&_1d!=_1c);return _1d;},addChild:function(_1e,_1f){this.inherited(arguments);this.ensureKeyboardNav();},removeChild:function(_20){this.inherited(arguments);this.ensureKeyboardNav();},ensureKeyboardNav:function(){var _21=this.getChildren();var _22=null;var _23=(typeof this.buttonWidget=="string")?_3.getObject(this.buttonWidget):this.buttonWidget;for(var _24=0;_24<_21.length;_24++){var _25=_21[_24];if(_25 instanceof _23){_22=_25;break;}}if((this._firstButton)&&(this._firstButton.focusNode)){_4.set(this._firstButton.focusNode,"tabindex","-1");if(this._firstFocus){this._firstFocus.remove();}if(this._firstAspect){this._firstAspect.remove();}this._firstButton=null;this._firstFocus=null;}if((_22)&&(_22.focusNode)){_4.set(_22.focusNode,"tabindex","0");this._firstFocus=_7(_22.focusNode,"onfocus",_3.hitch(this,"onFirstButtonFocus"));if(_22.onFocus){this._firstAspect=_8.after(_22,"onFocus",_3.hitch(this,"onFirstButtonFocus"),true);}this._firstButton=_22;}},onAddChild:function(_26){this.inherited(arguments);var _27=this.pane2button[_26.id];if(!_27){return;}var _28=(_27.focusNode?_27.focusNode:_27.domNode);var _29=_26.domNode;if((!_29)||(!_28)){return;}_4.set(_28,"aria-controls",_29.id);},onRemoveChild:function(_2a){this.inherited(arguments);this.ensureKeyboardNav();},onSelectChild:function(_2b){this.inherited(arguments);if(!this._currentChild){this.ensureKeyboardNav();}},onFirstButtonFocus:function(){if(!this._currentChild&&this._firstButton){this.onButtonClick(this._firstButton);}},onkeypress:function(e){this.inherited(arguments);},onButtonClick:function(_2c){var _2d=null;if(_2c.page){_2d=_2c.page;_a.focus(_2c.focusNode);}else{_2d=_2c;}var _2e=this.pane2button[_2d.id];_a.focus(_2e.focusNode);if(this._currentChild&&this._currentChild.id===_2d.id){var _2e=this.pane2button[_2d.id];_2e.set("checked",true);}var _2f=_9.byId(this.containerId);_2f.selectChild(_2d);}});_f.ListNavButton=_d;return _f;});