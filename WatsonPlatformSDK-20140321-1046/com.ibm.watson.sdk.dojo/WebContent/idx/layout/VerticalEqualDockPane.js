//>>built
define("idx/layout/VerticalEqualDockPane",["dojo/_base/declare","dojo/_base/array","dojo/_base/html","dojo/_base/connect","dojo/_base/fx","dojo/fx","dijit/_base/wai","dijit/layout/_LayoutWidget","dijit/TitlePane","idx/layout/_DockAreaMixin"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a){return _1("idx.layout.VerticalEqualDockPane",[_8,_a],{duration:500,scrollable:true,open:true,_hSpace:0,_vSpace:0,startup:function(){this.inherited(arguments);this.setupChildren();},addChild:function(_b,_c){this.inherited(arguments);this.setupChild(_b);},calcMarginSize:function(_d){if(this.__calculated){return;}var m=_3.marginBox(_d.domNode);var c=_3.contentBox(_d.domNode);this._hSpace=m.w-c.w;this._vSpace=m.h-c.h;this.__calculated=true;},setupChildren:function(){var _e=this.getChildren();if(_e==null){return;}for(var i=0;i<_e.length;i++){var _f=_e[i];this.setupChild(_f);}},setupChild:function(_10){this.calcMarginSize(_10);if(this.scrollable){_3.style(_10.containerNode,"overflow","auto");}var _11=_10._setOpenAttr;var _12=function(_13,_14){if(!this._dragging){var _15=this.getParent();this._set("open",_13);if(_13){_15._openPane(this);}else{_15._closePane(this);}}};_10._setOpenAttr=_12;var h1=_10.connect(_10,"onUndock",function(){_3.style(this.wipeNode,"height","auto");_3.style(this.containerNode,"height","auto");this._setOpenAttr=_11;this.disconnect(h1);});var h2=_10.connect(_10,"onDock",function(){var _16=this.getParent();if(_16!=null&&_16.declaredClass=="idx.layout.VerticalEqualDockPane"){this._setOpenAttr=_12;}this.disconnect(h2);});},layout:function(){if(_3.marginBox(this.domNode).w==0){return;}this.layoutVertical();},layoutVertical:function(){var _17=this._setupVerticalLayoutInfo();if(_17==null){return;}var _18=_3.contentBox(this.domNode).h;var _19=this;for(var i=0;i<_17.closePanes.length;i++){var _1a=_17.closePanes[i];if(!_3.hasClass(_1a.domNode,"idxDockAreaMockPane")){_3.style(_1a.hideNode,"display","none");_3.style(_1a.wipeNode,"display","none");_3.marginBox(_1a.wipeNode,{h:0});}_1a.resize({w:_17.wipeWidth});_18-=_3.marginBox(_1a.domNode).h;}for(var i=0;i<_17.openPanes.length;i++){var _1a=_17.openPanes[i];if(!_3.hasClass(_1a.domNode,"idxDockAreaMockPane")){_3.style(_1a.hideNode,"display","");_3.style(_1a.wipeNode,"display","");_3.marginBox(_1a.wipeNode,{h:_17.wipeHeight});if(this.scrollable){_3.marginBox(_1a.containerNode,{h:_17.wipeHeight});}_18-=_3.marginBox(_1a.domNode).h;if(_18>0&&(i==_17.openPanes.length-1)){_3.marginBox(_1a.wipeNode,{h:_17.wipeHeight+_18});if(this.scrollable){_3.marginBox(_1a.containerNode,{h:_17.wipeHeight+_18});}}}_1a.resize({w:_17.wipeWidth});}},_setupVerticalLayoutInfo:function(){var _1b=[];var _1c=[];var _1d=this.getChildren();if(_1d==null||_1d.length==0){return null;}var _1e=0;for(var i=0;i<_1d.length;i++){var _1f=_1d[i];if(_3.hasClass(_1f.domNode,"idxDockAreaMockPane")){_1e+=_3.marginBox(_1f).h;}else{_1f.toggleable=true;_1f.open?_1b.push(_1f):_1c.push(_1f);_1e+=_3.marginBox(_1f.titleBarNode).h+this._vSpace;}}var _20=_3.contentBox(this.domNode);var _21=_20.w;var h=_20.h-_1e;var _22=0;if(_1b.length>1){_22=Math.floor(h/_1b.length);}else{_22=h;}return {openPanes:_1b,closePanes:_1c,wipeWidth:_21,wipeHeight:_22};},_openPane:function(_23){if(this._animation&&this._animation.status()=="playing"){this._animation.stop();this._animation=null;}var _24=this;var _25=[];var _26=this._setupVerticalLayoutInfo();_2.forEach(_26.openPanes,function(_27){if(!_3.hasClass(_27.domNode,"idxDockAreaMockPane")){_25.push(_24._buildOpenAnimation(_27,_26));}});var _28=this._animation=_6.combine(_25);var con=_4.connect(_28,"onEnd",this,function(){this.layout();this._onPaneToggled(_23,true);_4.disconnect(con);});_28.play();},_closePane:function(_29){if(this._animation&&this._animation.status()=="playing"){this._animation.stop();this._animation=null;}var _2a=this;var _2b=[];var _2c=this._setupVerticalLayoutInfo();_2.forEach(_2c.openPanes,function(_2d){_2b.push(_2a._buildOpenAnimation(_2d,_2c));});_2b.push(_2a._buildCloseAnimation(_29));var _2e=this._animation=_6.combine(_2b);var con=_4.connect(_2e,"onEnd",this,function(){this.layout();this._onPaneToggled(_29,false);_4.disconnect(con);});_2e.play();},_onPaneToggled:function(_2f,_30){if(_3.hasClass(_2f.domNode,"idxDockAreaMockPane")){return;}if(_2f._started){if(_30){_2f._onShow();}else{_2f.onHide();}}_2f.arrowNodeInner.innerHTML=_30?"-":"+";_7.setWaiState(_2f.containerNode,"hidden",_30?"false":"true");_7.setWaiState(_2f.focusNode,"pressed",_30?"true":"false");_2f._set("open",_30);_2f._setCss();if(_30){this.onPaneOpen(_2f);}else{this.onPaneClose(_2f);}},onPaneOpen:function(_31){},onPaneClose:function(_32){},_buildOpenAnimation:function(_33,_34){var _35=this;var _36=_5.animateProperty({node:_33.wipeNode,duration:_35.duration,properties:{height:{start:_33.wipeNode.clientHeight,end:_34.wipeHeight}},onBegin:function(n){_3.style(_33.hideNode,"display","");_3.style(_33.wipeNode,"display","");},onEnd:function(){if(this.scrollable){_3.marginBox(_33.containerNode,{h:_34.wipeHeight});}}});return _36;},_buildCloseAnimation:function(_37){var _38=this;var _39=_5.animateProperty({node:_37.wipeNode,duration:_38.duration,properties:{height:{start:_37.wipeNode.clientHeight,end:0}},onEnd:function(n){_3.style(_37.hideNode,"display","none");_3.style(_37.wipeNode,"display","none");}});return _39;}});});