//>>built
define("idx/layout/_DockAreaMixin",["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/window","dojo/_base/html","dojo/_base/event","dojo/_base/connect","dojo/keys","dijit/registry","dijit/layout/_LayoutWidget","dijit/layout/ContentPane","idx/html","idx/util"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a,_b,_c,_d){return _1("idx.layout._DockAreaMixin",[_a],{collapseEmpty:true,postMixInProperties:function(){this.inherited(arguments);this._dim=(this.region=="top"||this.region=="bottom")?"x":"y";},postCreate:function(){this.inherited(arguments);_5.addClass(this.domNode,"idxDockArea");if(this._dim=="y"){_5.addClass(this.domNode,"idxDockAreaVertical");}else{_5.addClass(this.domNode,"idxDockAreaHorizontal");}},startup:function(){if(this._started){return;}this.inherited(arguments);this._mockPane=new _b({"class":"idxDockAreaMockPane"});},destroy:function(){this.inherited(arguments);this._mockPane.destroy();},_computeBounds:function(){var _e=_5.position(this.domNode);this._bounds=[];_3.forEach(this.getChildren(),_2.hitch(this,function(_f){var pos=_5.position(_f.domNode);this._bounds.push({x:pos.x-_e.x+pos.w/2,y:pos.y-_e.y+pos.h/2});}));},dock:function(_10,pos){_10.beforeDock();var idx=this._getInsertIndex(pos);_10.set("dockArea",this.region);var s={left:"",top:""};_5.style(_10.domNode,s);this.addChild(_10,idx);_10.onDock(this.region);this.resetDockArea();this.layout();_10.focusNode&&_10.focusNode.focus();},showDockArea:function(pos,_11){var idx=this._getInsertIndex(pos);if(this.isDockable()){this.updateDockArea(idx);}else{this._computeBounds();idx=this._getInsertIndex(pos);_5.addClass(this.domNode,"idxDockAreaDockable");this.addChild(this._mockPane,idx);this._resizeMockPane(_11);this.layout();}},_resizeMockPane:function(_12){var mb=_5.marginBox(_12.domNode);_5.style(this._mockPane.domNode,{height:mb.h+"px",width:mb.w+"px"});},resetDockArea:function(){_5.removeClass(this.domNode,"idxDockAreaDockable");if(this._mockPane){try{this.removeChild(this._mockPane);}catch(e){}}this.layout();},updateDockArea:function(idx){var _13=this.getIndexOfChild(this._mockPane);if(_13==idx){return;}this.removeChild(this._mockPane);this.addChild(this._mockPane,idx);this.layout();},isDockable:function(){return _5.hasClass(this.domNode,"idxDockAreaDockable");},_getInsertIndex:function(pos){var _14=_5.position(this.domNode);var rel={x:pos.x-_14.x,y:pos.y-_14.y};var _15=this._bounds;if(!_15){return 0;}var len=_15.length;for(var i=0;i<len;i++){if(rel[this._dim]<_15[i][this._dim]){return i;}}return len;}});});