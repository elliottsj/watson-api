//>>built
define("idx/util",["dojo/_base/lang","idx/main","dojo/_base/kernel","dojo/has","dojo/_base/xhr","dojo/_base/window","dojo/_base/url","dojo/date/stamp","dojo/json","dojo/string","dojo/dom-class","dojo/dom-style","dojo/dom-attr","dojo/dom-construct","dojo/dom-geometry","dojo/io-query","dojo/query","dojo/NodeList-dom","dijit/registry","dijit/form/_FormWidget","dijit/_WidgetBase","dojo/_base/sniff","dijit/_base/manager"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a,_b,_c,_d,_e,_f,_10,_11,_12,_13,_14,_15){var _16=_1.getObject("util",true,_2);_16.getVersion=function(_17){var _18={url:_3.moduleUrl("idx","version.txt"),showProgress:false,handleAs:"json",load:function(_19,_1a){var msg=_19.version;if(_17){msg+="-";msg+=_19.revision;}},error:function(_1b,_1c){return;}};_5.xhrGet(_18);};_16.getOffsetPosition=function(_1d,_1e){var _1f=_6.body();_1e=_1e||_1f;var n=_1d;var l=0;var t=0;while(n!==_1e){if(n===_1f){throw "idx.util.getOffsetPosition: specified root is not ancestor of specified node";}l+=n.offsetLeft;t+=n.offsetTop;n=n.offsetParent;}return {l:l,t:t};};_16.typeOfObject=function(_20){if(_1.isString(_20)){return "string";}if(typeof _20=="undefined"){return "undefined";}if(typeof _20=="number"){return "number";}if(typeof _20=="boolean"){return "boolean";}if(_1.isFunction(_20)){return "function";}if(_1.isArray(_20)){return "array";}if(_20 instanceof Date){return "date";}if(_20 instanceof _7){return "url";}return "object";};_16.parseObject=function(_21,_22){switch(_22){case "string":return ""+_21;case "number":if(typeof _21=="number"){return _21;}return _21.length?Number(_21):NaN;case "boolean":return (typeof _21=="boolean")?_21:!(_21.toLowerCase()=="false");case "function":if(_1.isFunction(_21)){_21=_21.toString();_21=_1.trim(_21.substring(_21.indexOf("{")+1,_21.length-1));}try{if(_21===""||_21.search(/[^\w\.]+/i)!=-1){return new Function(_21);}else{return _1.getObject(_21,false)||new Function(_21);}}catch(e){return new Function();}case "array":if(_1.isArray(_21)){return _21;}return _21?_21.split(/\s*,\s*/):[];case "date":if(_21 instanceof Date){return _21;}switch(_21){case "":return new Date("");case "now":return new Date();default:return _8.fromISOString(_21);}case "url":if(_21 instanceof _7){return _21;}return _3.baseUrl+_21;default:if(_16.typeOfObject(_21)=="string"){return _9.parse(_21);}else{return _21;}}};_16.getCSSOptions=function(_23,_24,_25){var _26=_6.body();if((!_24)||(("canHaveHTML" in _24)&&(!_24.canHaveHTML))){_24=_26;}var _27=false;var _28=_24;while(_28&&(!_27)){if(_28===_26){_27=true;}_28=_28.parentNode;}var _29=null;if(!_27){_28=_24;var _2a=[];while(_28){_2a.push(_d.get(_28,"class"));_28=_28.parentNode;}_2a.reverse();var _29=_e.create("div",{style:"visibility: hidden; display: none;"},_26,"last");var _28=_29;for(var _2b=0;_2b<_2a.length;_2b++){var _2c=_2a[_2b];if(_2c){_2c=_a.trim(_2c);}if(_2c&&_2c.length==0){_2c=null;}var _2d=(_2c)?{"class":_2c}:null;_28=_e.create("div",_2d,_28,"last");}_24=_28;}var _2e=_e.create("div",null,_24);_b.add(_2e,_23);var _2f=_c.getComputedStyle(_2e);var _30=null;if(_2f){_30=""+_2f.backgroundImage;}_e.destroy(_2e);if(_29){_e.destroy(_29);}if(!_30){return null;}if(_30.length<5){return null;}if(_30.toLowerCase().substring(0,4)!="url("){return null;}if(_30.charAt(_30.length-1)!=")"){return null;}_30=_30.substring(4,_30.length-1);if(_30.charAt(0)=="\""){if(_30.length<2){return null;}if(_30.charAt(_30.length-1)!="\""){return null;}_30=_30.substring(1,_30.length-1);}var _31=_30.lastIndexOf("?");var _32=_30.lastIndexOf("/");if(_31<0){return null;}if(_31<_32){return null;}var _33=_30.substring(_31+1,_30.length);if(_33==null){return null;}if(_33.length==0){return null;}var _34=_10.queryToObject(_33);return (_25)?_16.mixin({},_34,_25):_34;};_16.mixinCSSDefaults=function(_35,_36,_37){if(!_35){return null;}var _38=_16.getCSSOptions(_36,_37);if(!_38){return null;}_16.mixin(_35,_38);return _38;};_16.mixin=function(_39,_3a,_3b){if(!_39){return null;}if(!_3a){return _39;}if(!_3b){_3b=_39;}var src={};for(var _3c in _3a){if(!(_3c in _3b)){continue;}var _3d=_16.typeOfObject(_3b[_3c]);src[_3c]=_16.parseObject(_3a[_3c],_3d);}_1.mixin(_39,src);return _39;};_16.recursiveMixin=function(_3e,_3f,_40){var _41=null;var _42=null;var _43=null;if(_40){_41=_40.clone;_42=_40.controlField;if("controlValue" in _40){_43=_40.controlValue;}else{_43=true;}}for(field in _3f){if(field in _3e){var _44=_3e[field];var _45=_3f[field];var _46=_16.typeOfObject(_44);var _47=_16.typeOfObject(_45);if((_46==_47)&&(_46=="object")&&((!_42)||(_44[_42]==_43))){_16.recursiveMixin(_44,_45,_40);}else{_3e[field]=(_41)?_1.clone(_45):_45;}}else{_3e[field]=(_41)?_1.clone(_3f[field]):_3f[field];}}};_16.nullify=function(_48,_49,_4a){var _4b=0;for(_4b=0;_4b<_4a.length;_4b++){var _4c=_4a[_4b];if(!(_4c in _48)){continue;}if((_49)&&(_4c in _49)){continue;}_48[_4c]=null;}};_16._getNodeStyle=function(_4d){var _4e=_d.get(_4d,"style");if(!_4e){return null;}var _4f=null;if(_16.typeOfObject(_4e)=="string"){_4f={};var _50=_4e.split(";");for(var _51=0;_51<_50.length;_51++){var _52=_50[_51];var _53=_52.indexOf(":");if(_53<0){continue;}var _54=_52.substring(0,_53);var _55="";if(_53<_52.length-1){_55=_52.substring(_53+1);}_4f[_54]=_55;}}else{_4f=_4e;}return _4f;};_16._getNodePosition=function(_56){var _57=_16._getNodeStyle(_56);if(!_57){return "";}if(!_57.position){return "";}return _57.position;};_16.fitToWidth=function(_58,_59){var pos=_16._getNodePosition(_59);_c.set(_58,{width:"auto"});_c.set(_59,{position:"static"});var dim=_f.getMarginBox(_58);_c.set(_58,{width:dim.w+"px"});_c.set(_59,{position:pos});return dim;};_16.fitToHeight=function(_5a,_5b){var pos=_16._getNodePosition(_5b);_c.set(_5a,{height:"auto"});_c.set(_5b,{position:"static"});var dim=_f.getMarginBox(_5a);_c.set(_5a,{height:dim.h+"px"});_c.set(_5b,{position:pos});return dim;};_16.fitToSize=function(_5c,_5d){var pos=_16._getNodePosition(_5d);_c.set(_5c,{width:"auto",height:"auto"});_c.set(_5d,{position:"static"});var dim=_f.getMarginBox(_5c);_c.set(_5c,{width:dim.w+"px",height:dim.h+"px"});_c.set(_5d,{position:pos});return dim;};_16.getStaticSize=function(_5e){var _5f=_16._getNodeStyle(_5e);var pos=(_5f&&_5f.position)?_5f.position:"";var _60=(_5f&&_5f.width)?_5f.width:"";var _61=(_5f&&_5f.height)?_5f.height:"";_c.set(_5e,{position:"static",width:"auto",height:"auto"});var dim=_f.getMarginBox(_5e);_c.set(_5e,{position:pos,width:_60,height:_61});return dim;};_16.reposition=function(_62,_63){var _64=_16._getNodePosition(_62);_c.set(_62,{position:_63});return _64;};_16.getParentWidget=function(_65,_66){var _67=(_65 instanceof _15)?_65.domNode:_65;var _68=_67.parentNode;if(_68==null){return null;}var _69=_13.getEnclosingWidget(_68);while((_66)&&(_69)&&(!(_69 instanceof _66))){_68=_69.domNode.parentNode;_69=null;if(_68){_69=_13.getEnclosingWidget(_68);}}return _69;};_16.getSiblingWidget=function(_6a,_6b,_6c){var _6d=(_6a instanceof _15)?_6a.domNode:_6a;var _6e=_6d.parentNode;if(_6e==null){return null;}var _6f=_6e.childNodes;if(!_6f){return null;}var _70=0;for(_70=0;_70<_6f.length;_70++){if(_6f[_70]==_6d){break;}}if(_70==_6f.length){return null;}var _71=(_6b)?-1:1;var _72=(_6b)?-1:_6f.length;var _73=0;var _74=null;for(_73=(_70+_71);_73!=_72;(_73+=_71)){var _75=_6f[_73];var _76=_13.getEnclosingWidget(_75);if(!_76){continue;}if(_76.domNode==_75){if((!_6c)||(_76 instanceof _6c)){_74=_76;break;}}}return _74;};_16.getChildWidget=function(_77,_78,_79){if(!(_77 instanceof _15)){var _7a=_13.getEnclosingWidget(_77);if(_7a){_77=_7a;}}var _7b=null;if(_77 instanceof _15){_7b=_77.getChildren();}else{_7b=_77.childNodes;}if(!_7b){return null;}if(_7b.length==0){return null;}var _7c=(_78)?(_7b.length-1):0;var _7d=(_78)?-1:1;var _7e=(_78)?-1:_7b.length;var _7f=0;var _80=null;for(_7f=_7c;_7f!=_7e;(_7f+=_7d)){var _7a=_7b[_7f];if(!(_7a instanceof _15)){var _81=_7a;_7a=_13.getEnclosingWidget(_81);if(!_7a){continue;}if(_7a.domNode!=_81){continue;}}if((!_79)||(_7a instanceof _79)){_80=_7a;break;}}return _80;};_16.getFormWidget=function(_82,_83){var _84=null;if(!_83){_83=_6.body();}else{if(_83 instanceof _15){_84=_83.domNode;}else{_84=form;}}var _85=null;var _86=_11("[name='"+_82+"']",_84);for(var _87=0;(!_85)&&(_87<_86.length);_87++){var _88=_86[_87];var _89=_13.getEnclosingWidget(_88);if(!_89){continue;}if(!(_89 instanceof _14)){continue;}var _8a=_89.get("name");if(_8a!=_82){continue;}_85=_89;}return _85;};_16.isNodeOrElement=function(obj){return ((obj.parentNode)&&(obj.childNodes)&&(obj.attributes))?true:false;};_16.debugObject=function(obj){return _16._debugObject(obj,"/",[]);};_16._debugObject=function(obj,_8b,_8c){if(obj===null){return "null";}var _8d=_16.typeOfObject(obj);switch(_8d){case "object":for(var _8e=0;_8e<_8c.length;_8e++){if(_8c[_8e].obj==obj){return "CIRCULAR_REFERENCE[ "+_8c[_8e].path+" ]";}}_8c.push({obj:obj,path:_8b});var _8f="{ ";var _90="";for(field in obj){_8f=(_8f+_90+"\""+field+"\": "+_16._debugObject(obj[field],_8b+"/\""+field+"\"",_8c));_90=", ";}_8f=_8f+" }";return _8f;case "date":return "DATE[ "+_8.toISOString(obj)+" ]";default:return _9.stringify(obj);}};_16.isBrowser=_4("host-browser");_16.isIE=_4("ie");_16.isFF=_4("ff");_16.isSafari=_4("safari");_16.isChrome=_4("chrome");_16.isMozilla=_4("mozilla");_16.isOpera=_4("opera");_16.isKhtml=_4("khtml");_16.isAIR=_4("air");_16.isQuirks=_4("quirks");_16.isWebKit=_4("webkit");_16.fromJson=typeof JSON!="undefined"?JSON.parse:(function(){var _91="(?:-?\\b(?:0|[1-9][0-9]*)(?:\\.[0-9]+)?(?:[eE][+-]?[0-9]+)?\\b)";var _92="(?:[^\\0-\\x08\\x0a-\\x1f\"\\\\]"+"|\\\\(?:[\"/\\\\bfnrt]|u[0-9A-Fa-f]{4}))";var _93="(?:\""+_92+"*\")";var _94=new RegExp("(?:false|true|null|[\\{\\}\\[\\]]"+"|"+_91+"|"+_93+")","g");var _95=new RegExp("\\\\(?:([^u])|u(.{4}))","g");var _96={"\"":"\"","/":"/","\\":"\\","b":"\b","f":"\f","n":"\n","r":"\r","t":"\t"};function _97(_98,ch,hex){return ch?_96[ch]:String.fromCharCode(parseInt(hex,16));};var _99=new String("");var _9a="\\";var _9b={"{":Object,"[":Array};var hop=Object.hasOwnProperty;return function(_9c,_9d){var _9e=_9c.match(_94);var _9f;var tok=_9e[0];var _a0=false;if("{"===tok){_9f={};}else{if("["===tok){_9f=[];}else{_9f=[];_a0=true;}}var key;var _a1=[_9f];for(var i=1-_a0,n=_9e.length;i<n;++i){tok=_9e[i];var _a2;switch(tok.charCodeAt(0)){default:_a2=_a1[0];_a2[key||_a2.length]=+(tok);key=void 0;break;case 34:tok=tok.substring(1,tok.length-1);if(tok.indexOf(_9a)!==-1){tok=tok.replace(_95,_97);}_a2=_a1[0];if(!key){if(_a2 instanceof Array){key=_a2.length;}else{key=tok||_99;break;}}_a2[key]=tok;key=void 0;break;case 91:_a2=_a1[0];_a1.unshift(_a2[key||_a2.length]=[]);key=void 0;break;case 93:_a1.shift();break;case 102:_a2=_a1[0];_a2[key||_a2.length]=false;key=void 0;break;case 110:_a2=_a1[0];_a2[key||_a2.length]=null;key=void 0;break;case 116:_a2=_a1[0];_a2[key||_a2.length]=true;key=void 0;break;case 123:_a2=_a1[0];_a1.unshift(_a2[key||_a2.length]={});key=void 0;break;case 125:_a1.shift();break;}}if(_a0){if(_a1.length!==1){throw new Error();}_9f=_9f[0];}else{if(_a1.length){throw new Error();}}if(_9d){var _a3=function(_a4,key){var _a5=_a4[key];if(_a5&&typeof _a5==="object"){var _a6=null;for(var k in _a5){if(hop.call(_a5,k)&&_a5!==_a4){var v=_a3(_a5,k);if(v!==void 0){_a5[k]=v;}else{if(!_a6){_a6=[];}_a6.push(k);}}}if(_a6){for(var i=_a6.length;--i>=0;){delete _a5[_a6[i]];}}}return _9d.call(_a4,key,_a5);};_9f=_a3({"":_9f},"");}return _9f;};})();function _a7(_a8,_a9){var _aa=_a8;if(!_aa){_aa={"1em":-1,"1ex":-1,"100%":-1,"12pt":-1,"16px":-1,"xx-small":-1,"x-small":-1,"small":1,"medium":-1,"large":-1,"x-large":-1,"xx-large":-1};}if(_a9&&(!(_a9 in _aa))){_aa[_a9]=-1;}var p;if(_4("ie")){_6.doc.documentElement.style.fontSize="100%";}var div=_e.create("div",{style:{position:"absolute",left:"0",top:"-100000px",width:"30px",height:"1000em",borderWidth:"0",margin:"0",padding:"0",outline:"none",lineHeight:"1",overflow:"hidden"}},_6.body());for(p in _aa){if(_aa[p]>=0){continue;}_c.set(div,"fontSize",p);_aa[p]=Math.round(div.offsetHeight*12/16)*16/12/1000;}_6.body().removeChild(div);return _aa;};function _ab(_ac){var _ad=_16.typeOfObject(_ac);if((_ad=="object")&&(_16.isNodeOrElement(_ac))){var _ae=_c.getComputedStyle(_ac);_ac=_ae["fontSize"];}else{if(_ad!="string"){_ac=""+_ac;}}return _ac;};var _af=null;function _b0(_b1,_b2){var _b3=_16.typeOfObject(_b1);if(_b3=="boolean"){_b2=_b1;_b1=null;}else{_b1=_ab(_b1);}if(_af&&_b2){if(_b1){if(_af[_b1]){delete _af[_b1];}}else{_af=null;}}if(_b2||!_af||(_b1&&!_af[_b1])){_af=_a7(_af,_b1);}return _af;};_16.normalizedLength=function(len,_b4){if(len.length===0){return 0;}if(!_b4){_b4="12pt";}else{_b4=_ab(_b4);}if(len.length>2){var _b5=len.slice(-2);var _b6=(_b5=="em"||_b5=="ex");if(!_b6){_b4="12pt";}var fm=_b0(_b4);var _b7=fm["12pt"]/12;var _b8=fm[_b4];var _b9=_b8/2;var val=parseFloat(len);switch(len.slice(-2)){case "px":return val;case "em":return val*_b8;case "ex":return val*_b9;case "pt":return val*_b7;case "in":return val*72*_b7;case "pc":return val*12*_b7;case "mm":return val*g.mm_in_pt*_b7;case "cm":return val*g.cm_in_pt*_b7;}}return parseFloat(len);};_16.isPercentage=function(_ba){return /^\d+%$/.test(_ba);};_16.includeValidCSSWidth=function(_bb){return /width:\s*\d+(%|px|pt|in|pc|mm|cm)/.test(_bb);};_16.getValidCSSWidth=function(_bc){var _bd=_16.typeOfObject(_bc);if(_bd!="string"){if("width" in _bc){_bc="width: "+_bc.width+";";}else{_bc="width: "+_bc+";";}}return /width:\s*\d+(%|px|pt|in|pc|mm|cm|em|ex)/.test(_bc)?_bc.match(/width:\s*(\d+(%|px|pt|in|pc|mm|cm|em|ex))/)[1]:"";};_16.widgetEquals=function(w1,w2){if(w1===w2){return true;}if(!w1&&w2){return false;}if(w1&&!w2){return false;}if((!_1.isString(w1))&&("id" in w1)){w1=w1.id;}if((!_1.isString(w2))&&("id" in w2)){w2=w2.id;}return (w1==w2);};return _16;});