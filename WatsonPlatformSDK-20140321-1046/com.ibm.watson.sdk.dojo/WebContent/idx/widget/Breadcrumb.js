//>>built
define("idx/widget/Breadcrumb",["dojo/_base/declare","dojo/_base/lang","dojo/_base/html","dijit/registry","dijit/_Widget","dijit/_TemplatedMixin"],function(_1,_2,_3,_4,_5,_6){var _7=_2.getObject("idx.widget",true);var _8=_1("idx.widget.Breadcrumb",[_5,_6],{templateString:"<div class=\"idxBreadcrumb\"><div dojoAttachPoint=\"containerNode\"></div></div>",breadcrumbs:null,_separatorClass:"idx.widget._Separator",postCreate:function(){this.inherited(arguments);this.breadcrumbs=[];},destroy:function(){this.inherited(arguments);this.breadcrumbs=null;},pop:function(bc){if(this.breadcrumbs.length==0){return;}var _9=true;while(_9){var _a=this.breadcrumbs.pop();if(_a==bc){this.breadcrumbs.push(_a);break;}if(this.breadcrumbs.length>1){this.breadcrumbs.pop();}if(!bc){_9=false;}}this._refresh();},push:function(bc){if(this.breadcrumbs&&this.breadcrumbs.length>0){var sp=this._generateSeparator();this.breadcrumbs.push(sp);}this.breadcrumbs.push(bc);this._refresh();},_generateSeparator:function(){var _b=_2.getObject(this._separatorClass);var sp=new _b();return sp;},_clearContent:function(){var ws=_4.findWidgets(this.containerNode);for(i in ws){var w=ws[i];if(w.destroy){w.destroy();}}this.containerNode.innerHTML="";},_renderItems:function(){var _c=this;for(var i=0;i<this.breadcrumbs.length;i++){var bc=this.breadcrumbs[i];var _d=bc.isSeparator;this._renderItem(bc,!_d&&i!=this.breadcrumbs.length-1);}},_renderItem:function(bc,_e){var _f;var _10=this;if(_e){_f=_3.create("A",{href:"javascript:;"});_3.addClass(_f,"dijitInline idxBreadcrumbItem idxBreadcrumbItemClickable");bc.connect(_f,"onclick",function(e){_10.pop(bc);if(bc.onClick){bc.onClick(e);}});}else{_f=_3.create("SPAN",{});_3.addClass(_f,"dijitInline idxBreadcrumbItem");}_f.appendChild(bc.render());this.containerNode.appendChild(_f);},_refresh:function(){this._clearContent();this._renderItems();}});_8.Separator=_1("idx.widget._Separator",[_5],{isSeparator:true,res:null,postMixInProperties:function(){this.inherited(arguments);this.res={arrowSeparater:" > "};},render:function(){var div=_3.create("DIV",{innerHTML:this.res.arrowSeparater});return div;}});_8.Crumb=_1("idx.widget._SimpleBreadcrumb",[_5],{label:"",title:"",render:function(){var div=_3.create("DIV",{innerHTML:this.label,title:this.title});return div;},onClick:function(e){}});_7.ECMBreadcrumb=_8;return _8;});