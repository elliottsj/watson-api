//>>built
require({cache:{"url:idx/widget/templates/HoverCard.html":"<div class=\"idxOneuiHoverCard idxOneuiHoverCardLeft dijitHidden\"\r\n\t><div\r\n\t\t><span data-dojo-attach-point=\"closeButtonNode, focusNode\" class=\"idxOneuiHoverCardCloseIcon\" \r\n\t\t\tdata-dojo-attach-event=\"ondijitclick: hide\" role=\"button\" tabIndex=\"0\" aria-label=\"${buttonClose}\"\r\n\t\t\t><span class=\"closeText\">x</span\r\n\t\t></span\r\n\t></div\r\n\t><div data-dojo-attach-point=\"bodyNode\" class=\"idxOneuiHoverCardBody\"\r\n\t\t><div class=\"idxOneuiHoverCardGrip\" data-dojo-attach-point=\"gripNode\"></div\r\n\t\t><div class=\"idxOneuiHoverCardContainer\" data-dojo-attach-point=\"containerNode\"></div\r\n\t\t><div class=\"idxOneuiHoverCardFooter\"\r\n\t\t\t><div class=\"idxOneuiHoverCardActionIcons\" data-dojo-attach-point=\"actionIcons\"></div\r\n\t\t\t><span aria-haspopup=\"true\" data-dojo-attach-point=\"moreActionsNode\"></span\r\n\t\t></div\r\n\t\t><div class=\"idxOneuiHoverCardFooterExpand\"></div\r\n\t></div\r\n\t><div class=\"idxOneuiHoverCardConnector\" data-dojo-attach-point=\"connectorNode\"></div\r\n></div>\r\n\r\n\r\n"}});define("idx/widget/HoverCard",["dojo/_base/declare","dojo/_base/array","dojo/keys","dijit/focus","dijit/a11y","dojo/_base/event","dojo/_base/fx","dojo/_base/lang","dojo/_base/html","dojo/dom-geometry","dijit/place","dojo/dom","dojo/dom-style","dojo/dom-class","dojo/dom-attr","dojo/dom-construct","dojo/dnd/Moveable","dojo/dnd/TimedMoveable","dojo/_base/window","dojo/_base/connect","dojo/_base/sniff","dojo/topic","dijit/_base/wai","dijit/_base/manager","dijit/popup","dijit/focus","dijit/BackgroundIframe","dijit/TooltipDialog","idx/widget/Menu","dijit/MenuItem","dijit/form/DropDownButton","dijit/form/Button","dojo/text!./templates/HoverCard.html","dijit/registry","idx/form/_FocusManager","idx/util","dojo/i18n!./nls/HoverCard","dojo/i18n!./nls/Dialog"],function(_1,_2,_3,_4,_5,_6,fx,_7,_8,_9,_a,_b,_c,_d,_e,_f,_10,_11,win,_12,has,_13,wai,_14,_15,_16,_17,_18,_19,_1a,_1b,_1c,_1d,_1e,_1f,_20,_21,_22){var _23=_7.getObject("idx.oneui",true);var _24=_1("idx.widget.HoverCard",[_18],{templateString:_1d,target:"",draggable:true,showDelay:500,hideDelay:800,moreActions:null,actions:null,content:null,forceFocus:true,position:null,duration:_14.defaultDuration,postMixInProperties:function(){this.moreActionsLabel=_21.moreActionsLabel;this.buttonClose=_22.closeButtonLabel;},destroy:function(){if(this._targetConnections){for(var _25=0;_25<this._targetConnections.length;_25++){_12.disconnect(this._targetConnections[_25]);}delete this._targetConnections;}this.inherited(arguments);},_setTargetAttr:function(_26){var _26=_b.byId(_26);if(_26==this.target){return;}if(this._targetConnections){for(var _27=0;_27<this._targetConnections.length;_27++){_12.disconnect(this._targetConnections[_27]);}delete this._targetConnections;}this._targetConnections=[_12.connect(_26,"onmouseenter",this,"_onHover"),_12.connect(_26,"onmouseleave",this,"_onUnHover"),_12.connect(_26,"onkeypress",this,"_onTargetNodeKey")];this._set("target",_26);this._createWrapper();},_onTargetNodeKey:function(evt){var _28=evt.target;if(evt.charOrCode==_3.ENTER||evt.charOrCode==_3.SPACE||evt.charOrCode==" "){this._showTimer=setTimeout(_7.hitch(this,function(){this.open(_28);}),this.showDelay);_6.stop(evt);}},_setActionsAttr:function(_29){_2.forEach(_29,function(_2a){var _2b=new _1c({iconClass:_2a.iconClass,onClick:_2a.content?_7.hitch(this,function(){}):_2a.onClick,baseClass:"idxOneuiHoverCardFooterButton"});_8.place(_2b.domNode,this.actionIcons);},this);},_setMoreActionsAttr:function(_2c){var _2d=new _19({});_2.forEach(_2c,function(_2e){_2d.addChild(new _1a({label:_2e.label,onClick:_2e.onClick}));});_2d.startup();var _2f=new _1b({label:this.moreActionsLabel,dropDown:_2d,baseClass:"idxOneuiHoverCardMenu"},this.moreActionsNode);this.moreActionsMenu=_2d;},_setContentAttr:function(_30){var _31=_1e.byId(_30);if(!_31.declaredClass){this.inherited(arguments);}else{_8.place(_31.domNode,this.containerNode);_d.toggle(this.containerNode,"idxOneuiHoverCardWithoutPreviewImg",!_31.image);}},_onHover:function(e){if(this.isShowingNow){return;}if(!this._showTimer){var _32=e.target;this._showTimer=setTimeout(_7.hitch(this,function(){this.open(_32);}),this.showDelay);}if(this._hideTimer){clearTimeout(this._hideTimer);delete this._hideTimer;}},_onUnHover:function(){if(this._focus){return;}if(this._showTimer){clearTimeout(this._showTimer);delete this._showTimer;}if(!this._hideTimer){this._hideTimer=setTimeout(_7.hitch(this,function(){this.close();}),this.hideDelay);}},onClose:function(){this.close();},onBlur:function(){this.close();},postCreate:function(){this.bgIframe=new _17(this.domNode);this.fadeIn=fx.fadeIn({node:this.domNode,duration:this.duration,onEnd:_7.hitch(this,"_onShow")});this.fadeOut=fx.fadeOut({node:this.domNode,duration:this.duration,onEnd:_7.hitch(this,"_onHide")});this.subscribe("new-hoverCard-open","onOtherCardOpen");this.connect(this.gripNode,"onmouseenter",function(){_d.add(this.gripNode,"idxOneuiHoverCardGripHover");});this.connect(this.gripNode,"onmouseleave",function(){_d.remove(this.gripNode,"idxOneuiHoverCardGripHover");});this.connect(this.domNode,"onkeypress","_onKey");this.connect(this.domNode,"onmouseenter",function(){this._hovered=true;if(this._hideTimer){clearTimeout(this._hideTimer);delete this._hideTimer;}});this.connect(this.domNode,"onmouseleave",function(){this._hovered=false;var _33=_15._stack;if(_33.length&&_33[_33.length-1].widget!=this){return;}this._onUnHover();});},open:function(_34){_16._onTouchNode(this.target,"mouse");wai.setWaiRole(this.domNode,"alert");if(this._showTimer){clearTimeout(this._showTimer);delete this._showTimer;}if(this.isShowingNow){if(this.forceFocus){this.focus();}return;}_13.publish("new-hoverCard-open",this.target);this.show(this.domNode.innerHTML,_34,this.position,!this.isLeftToRight(),this.textDir);this._connectNode=_34;this.onShow(_34,this.position);},close:function(){if(this._connectNode&&!this._hovered&&!this._moved&&(!this.moreActionsMenu||!this.moreActionsMenu._hoveredChild)){this.hide(this._connectNode);delete this._connectNode;this.onHide();this._removeFromPopupStack();}if(this._showTimer){clearTimeout(this._showTimer);delete this._showTimer;}},focus:function(){this.inherited(arguments);this._focus=true;},show:function(_35,_36,_37,rtl,_38){_c.set(this._popupWrapper,"display","");_d.remove(this.domNode,"dijitHidden");if(dojo.isIE<=7){_c.set(this.bodyNode,"width",_c.get(this.containerNode,"width")+5+"px");}_c.set(this.connectorNode,"visibility","visible");this.domNode.width="auto";if(this.fadeOut.status()=="playing"){this._onDeck=arguments;return;}this.set("textDir",_38);this.containerNode.align=rtl?"right":"left";var pos=_a.around(this.domNode,_36,_37&&_37.length?_37:_24.defaultPosition,!rtl,_7.hitch(this,"orient"));this._connectorReposition(pos);if(this.gripNode&&this.draggable){this.enableDnd();}_c.set(this.domNode,{"opacity":0,"position":"absolute"});this._popupWrapper.appendChild(this.domNode);if(rtl){_c.set(this.domNode,{"left":_9.position(this.domNode).x+"px","right":"auto"});}this._addToPopupStack();this.fadeIn.play();this.isShowingNow=true;this.aroundNode=_36;},_addToPopupStack:function(){var _39=_15._stack;_c.set(this.domNode,"zIndex",_15._beginZIndex+_39.length);_15._stack.push({widget:this,handlers:[]});},_createWrapper:function(){if(!this._popupWrapper){this._popupWrapper=_f.create("div",{style:{"display":"none"}},this.ownerDocumentBody);if(this.target&&this.target.id){_e.set(this._popupWrapper,"dijitPopupParent",this.target.id);}else{this._popupWrapper.dijitPopupParent=this.target;}}},_removeFromPopupStack:function(){var _3a=_15._stack,top;while((top=_3a.pop())){var _3b=top.onClose,_3c=top.widget;_3c.onClose&&_3c.onClose();var h;while(h=top.handlers.pop()){h.remove();}if(_3c&&_3c.domNode){_15.hide(_3c);}_3b&&_3b();if(top.widget==this){break;}}},_connectorReposition:function(pos){if(pos.corner.charAt(0)=="B"&&pos.aroundCorner.charAt(0)=="B"){var mb=_9.getMarginBox(this.domNode);var _3d=this.connectorNode.offsetHeight;if(mb.h>pos.spaceAvailable.h){var _3e=pos.spaceAvailable.h-((pos.aroundNodePos.h+_3d)>>1);this.connectorNode.style.top=_3e+"px";this.connectorNode.style.bottom="";}else{this.connectorNode.style.bottom=Math.min(Math.max(pos.aroundNodePos.h/2-_3d/2,0),mb.h-_3d)+"px";this.connectorNode.style.top="";}}else{if(pos.corner.charAt(0)=="M"&&pos.aroundCorner.charAt(0)=="M"){this.connectorNode.style.top=pos.aroundNodePos.y+((pos.aroundNodePos.h-this.connectorNode.offsetHeight)>>1)-pos.y+"px";this.connectorNode.style.left="";}else{if(pos.corner.charAt(1)=="M"&&pos.aroundCorner.charAt(1)=="M"){this.connectorNode.style.left=pos.aroundNodePos.x+((pos.aroundNodePos.w-this.connectorNode.offsetWidth)>>1)-pos.x+"px";}else{this.connectorNode.style.top="";this.connectorNode.style.bottom="";}}}},orient:function(_3f,_40,_41,_42,_43){this.connectorNode.style.top="";var _44=_42.w-this.connectorNode.offsetWidth;_3f.className="idxOneuiHoverCard "+{"MR-ML":"idxOneuiHoverCardRight","ML-MR":"idxOneuiHoverCardLeft","TM-BM":"idxOneuiHoverCardAbove","BM-TM":"idxOneuiHoverCardBelow","BL-TL":"idxOneuiHoverCardBelow idxOneuiHoverCardABLeft","TL-BL":"idxOneuiHoverCardAbove idxOneuiHoverCardABLeft","BR-TR":"idxOneuiHoverCardBelow idxOneuiHoverCardABRight","TR-BR":"idxOneuiHoverCardAbove idxOneuiHoverCardABRight","BR-BL":"idxOneuiHoverCardRight","BL-BR":"idxOneuiHoverCardLeft","TR-TL":"idxOneuiHoverCardRight"}[_40+"-"+_41];this.domNode.style.width="auto";var _45=_9.getContentBox(this.domNode);var _46=Math.min((Math.max(_44,1)),_45.w);var _47=_46<_45.w;this.domNode.style.width=_46+"px";if(_47){this.containerNode.style.overflow="auto";var _48=this.containerNode.scrollWidth;this.containerNode.style.overflow="visible";if(_48>_46){_48=_48+_c.get(this.domNode,"paddingLeft")+_c.get(this.domNode,"paddingRight");this.domNode.style.width=_48+"px";}}return Math.max(0,_45.w-_44);},hide:function(_49){if(this._onDeck&&this._onDeck[1]==_49){this._onDeck=null;}else{if(this.aroundNode===_49||this.isShowingNow){this.fadeIn.stop();this.isShowingNow=false;this.aroundNode=null;this.fadeOut.play();this._focus=false;this._hovered=false;this._moved=false;}else{}}},enableDnd:function(){var _4a=this.domNode,_4b=this.connectorNode;this._moveable=new ((has("ie")==6)?_11:_10)(_4a,{handle:this.gripNode});this.connect(this._moveable,"onMoveStart",function(){_c.set(_4b,"visibility","hidden");_d.add(this.gripNode,"idxOneuiHoverCardGripActive");this._moved=true;});this.connect(this._moveable,"onMoveStop",function(){_d.remove(this.gripNode,"idxOneuiHoverCardGripActive");_d.add(this.gripNode,"idxOneuiHoverCardGrip");});},onOtherCardOpen:function(_4c){if(!this.isShowingNow){return;}var _4d=_15._stack;if(_4d.length&&_4d[_4d.length-1].widget==this){if(!_b.isDescendant(_4c,this.bodyNode)){this.close();}}},_onShow:function(){if(has("ie")){this.domNode.style.filter="";}if(this.forceFocus){this.focus();}},_onHide:function(){_d.add(this.domNode,"dijitHidden");_c.set(this._popupWrapper,"display","none");this.target.focus&&this.target.focus();if(this._onDeck){this.show.apply(this,this._onDeck);this._onDeck=null;}},_getFocusItems:function(){var _4e=_5._getTabNavigable(this.domNode);this._firstFocusItem=_4e.lowest||_4e.first||this.closeButtonNode||this.domNode;this._lastFocusItem=_4e.last||_4e.highest||this._firstFocusItem;},_onKey:function(evt){var _4f=evt.target;if(evt.charOrCode===_3.TAB){this._getFocusItems(this.domNode);}var _50=(this._firstFocusItem==this._lastFocusItem);if(evt.charOrCode==_3.ESCAPE){setTimeout(_7.hitch(this,"hide"),0);_6.stop(evt);}else{if(_4f==this._firstFocusItem&&evt.shiftKey&&evt.charOrCode===_3.TAB){if(!_50){_4.focus(this._lastFocusItem);}_6.stop(evt);}else{if(_4f==this._lastFocusItem&&evt.charOrCode===_3.TAB&&!evt.shiftKey){if(!_50){_4.focus(this._firstFocusItem);}_6.stop(evt);}else{if(evt.charOrCode===_3.TAB){evt.stopPropagation();}}}}}});_24.defaultPosition=["after-centered","before-centered","below","above"];_23.HoverCard=_24;return _24;});