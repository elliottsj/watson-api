//>>built
require({cache:{"url:idx/widget/templates/MenuDialog.html":"<div role=\"presentation\">\r\n\t<div class=\"dijitTooltipContainer\" role=\"presentation\">\r\n\t\t<div class =\"dijitTooltipContents dijitTooltipFocusNode\" data-dojo-attach-point=\"containerNode\" role=\"presentation\" tabIndex=\"-1\"></div>\r\n\t</div>\r\n\t<div class=\"dijitTooltipConnector\" role=\"presentation\" data-dojo-attach-point=\"connectorNode\"></div>\r\n</div>\r\n"}});define("idx/widget/MenuDialog",["dojo/_base/declare","dojo/_base/array","dojo/_base/connect","dojo/_base/event","dojo/_base/lang","dojo/_base/sniff","dojo/_base/window","dojo/aspect","dojo/dom","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/request/iframe","dojo/keys","dojo/window","dijit/popup","dijit/TooltipDialog","./_EventTriggerMixin","dojo/text!./templates/MenuDialog.html"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a,_b,_c,_d,_e,_f,_10,_11,_12,_13){var _14=_5.getObject("idx.oneui",true);function _15(_16){return (_16.nodeName==="TEXTAREA")||((_16.nodeName==="INPUT")&&(_16.type==="text"));};return _14.MenuDialog=_1("idx.widget.MenuDialog",[_11,_12],{baseClass:"oneuiMenuDialog",_closeOnBlur:false,hoverToOpen:true,isShowingNow:false,leftClickToOpen:false,parentMenu:null,refocus:true,targetNodeIds:[],templateString:_13,useConnector:false,postCreate:function(){this.inherited(arguments);var l=this.isLeftToRight();this._nextMenuKey=l?_e.RIGHT_ARROW:_e.LEFT_ARROW;this._prevMenuKey=l?_e.LEFT_ARROW:_e.RIGHT_ARROW;this.connect(this.domNode,"onkeypress","_onDomNodeKeypress");if(this.contextMenuForWindow){this.bindDomNode(_7.body());}else{_2.forEach(this.targetNodeIds,function(_17){this.bindDomNode(_17);},this);}},_onDomNodeKeypress:function(evt){var _18=evt.target||evt.srcElement,_19=false;if(this.parentMenu&&!evt.ctrlKey&&!evt.altKey&&(!_18||!_15(_18))){switch(evt.charOrCode){case this._nextMenuKey:this.parentMenu._getTopMenu().focusNext();_19=true;break;case this._prevMenuKey:if(this.parentMenu._isMenuBar){this.parentMenu.focusPrev();}else{this.onCancel(false);}_19=true;break;}}if(_19){_4.stop(evt);}else{this.inherited(arguments);}},_getMenuForDialog:function(){var _1a=this.getChildren(),_1b;for(var i=0;!_1b&&(i<_1a.length);i++){if(_1a[i]&&_1a[i].menuForDialog){_1b=_1a[i];}}return _1b;},focus:function(){if(!this.focused){this.inherited(arguments);}},_getFocusItems:function(){this.inherited(arguments);if(this._firstFocusItem==this.domNode){this._firstFocusItem=this.containerNode;}if(this._lastFocusItem==this.domNode){this._lastFocusItem=this.containerNode;}},_onTrigger:function(_1c){var _1d=null;if(!_1c.additionalData.leftClickToOpen&&("pageX" in _1c.event)){_1d={x:_1c.event.pageX,y:_1c.event.pageY};if(_1c.triggerNode.tagName==="IFRAME"){var ifc=_b.position(_1c.triggerNode,true),_1e=_7.withGlobal(_f.get(_d.doc(_1c.triggerNode)),"docScroll",_b);var cs=_c.getComputedStyle(_1c.triggerNode),tp=_c.toPixelValue,_1f=(_6("ie")&&_6("quirks")?0:tp(_1c.triggerNode,cs.paddingLeft))+(_6("ie")&&_6("quirks")?tp(_1c.triggerNode,cs.borderLeftWidth):0),top=(_6("ie")&&_6("quirks")?0:tp(_1c.triggerNode,cs.paddingTop))+(_6("ie")&&_6("quirks")?tp(_1c.triggerNode,cs.borderTopWidth):0);_1d.x+=ifc.x+_1f-_1e.x;_1d.y+=ifc.y+top-_1e.y;}}if(!this._openTimer){this._openTimer=setTimeout(_5.hitch(this,function(){delete this._openTimer;this.open({around:_1c.triggerNode,coords:_1d,position:_1c.additionalData.popupPosition,useConnector:_1c.additionalData.useConnector});}),1);}if(_1c.event.type!="hover"){_4.stop(_1c.event);}},onBlur:function(){this.inherited(arguments);if(this._closeOnBlur){this.close();}},open:function(_20){var _21=null;if(this.refocus){_21=this._focusManager.get("curNode");if(!_21||_9.isDescendant(_21,this.domNode)){_21=this._focusManager.get("prevNode");}if(_9.isDescendant(_21,this.domNode)){_21=null;}}var _22=(_20&&(_20.coords?{x:_20.coords.x,y:_20.coords.y,w:0,h:0}:_20.around))||_21||this._focusManager.get("curNode")||{x:0,y:0,w:0,h:0};var _23=_5.hitch(this,function(){if(_21){_21.focus();}this.close();});this._useConnectorForPopup=(_20&&("useConnector" in _20))?_20.useConnector:this.useConnector;_10.open({popup:this,around:_22,onExecute:_23,onCancel:_23,orient:(_20&&("position" in _20))?_20.position:this.popupPosition});delete this._useConnectorForPopup;this.focus();this._closeOnBlur=true;},close:function(){_10.close(this);},bindDomNode:function(_24,_25){var _26=_5.delegate(this);for(var _27 in _25){_26[_27]=_25[_27];}this._addEventTrigger(_24,"click",function(_28){return _26.leftClickToOpen;},_26);this._addEventTrigger(_24,"contextmenu",function(_29){return !_26.leftClickToOpen;},_26);this._addEventTrigger(_24,"keydown",function(_2a){return !_26.leftClickToOpen&&_2a.event.shiftKey&&(_2a.event.keyCode==_e.F10);},_26);this._addEventTrigger(_24,"hover",function(_2b){return _26.hoverToOpen;},_26);},unBindDomNode:function(_2c){this._removeEventTriggers(_2c);},_layoutNodes:function(_2d,_2e,_2f,_30){var _31=_30?"oneuiMenuDialogConnected":"",_32="",_33=_2f&&(_2f.length>=1)&&_2f.charAt(0),_34=_2f&&(_2f.length>=2)&&_2f.charAt(1),_35=_b.getContentBox(this.domNode),_36,_37,_38=function(_39){var _3a=_39.style,_3b=_3a.display,_3c=_3a.visibility;if(_3a.display=="none"){_3a.visibility="hidden";_3a.display="";}var _3d=_b.getContentBox(_39);_3a.display=_3b;_3a.visibility=_3c;return _3d;};if((_33==="M")||((_34!=="M")&&(_34!==_2e.charAt(1)))){_31+=" dijitTooltip"+(_34==="L"?"Right":"Left");switch(_33){case "M":_31+=" dijitTooltipLRMiddle";break;case "T":_31+=" dijitTooltipLRTop";_30&&(_32="connectorNearTopEdge");if(_2d.h>0){_36="top";_37=Math.max(4,4+Math.min(_38(this.domNode.parentNode).h-24,_2d.h/2))+"px";}break;case "B":_31+=" dijitTooltipLRBottom";_30&&(_32="connectorNearBottomEdge");if(_2d.h>0){_36="bottom";_37=(4+Math.min(_38(this.domNode.parentNode).h-24,_2d.h/2))+"px";}break;}}else{_31+=" dijitTooltip"+(_33==="T"?"Below":"Above");switch(_34){case "M":_31+=" dijitTooltipABMiddle";break;case "L":_31+=" dijitTooltipABLeft";_30&&(_32="connectorNearLeftEdge");if(_2d.w>0){_36="left";_37=Math.max(4,4+Math.min(_38(this.domNode.parentNode).w-16,_2d.w/2))+"px";}break;case "R":_31+=" dijitTooltipABRight";_30&&(_32="connectorNearRightEdge");if(_2d.h>0){_36="right";_37=(4+Math.min(_38(this.domNode.parentNode).w-24,_2d.w/2))+"px";}break;}}_a.replace(this.domNode,_31,this._currentOrientClass||"");this._currentOrientClass=_31;_a.replace(this.domNode.parentNode,_32,this._currentConnectorClass||"");this._currentConnectorClass=_32;this.connectorNode.style.top="";this.connectorNode.style.bottom="";this.connectorNode.style.left="";this.connectorNode.style.right="";if(_36){this.connectorNode.style[_36]=_37;}},orient:function(_3e,_3f,_40,_41,_42){this._layoutNodes(_42,_3f,_40,("_useConnectorForPopup" in this)?this._useConnectorForPopup:this.useConnector);},onOpen:function(pos){this.isShowingNow=true;this._layoutNodes(pos.aroundNodePos,pos.aroundCorner,pos.corner,("_useConnectorForPopup" in this)?this._useConnectorForPopup:this.useConnector);this.reset();var _43=this._getMenuForDialog();if(_43){if(this._menuparented){this._menuparented.parentMenu=null;}_43.parentMenu=this.parentMenu;this._menuparented=_43;if(this._handleexecute){this._handleexecute.remove();}var _44=_5.hitch(this,this.onExecute);this._handleexecute=_43.on("execute",_44);if(this._handleopen){this._handleopen.remove();}this._handleopen=_8.after(_43,"_openPopup",function(){var _45=_10._stack[_10._stack.length-1];if(!_45._menuregistered){_45._menuregistered=true;_45.handlers.push(_8.around(_45,"onExecute",function(_46){return function(){_46.apply(this,arguments);_44();};}));}},true);}this._onShow();},onClose:function(){this.isShowingNow=false;this._closeOnBlur=false;if(this._handleexecute){this._handleexecute.remove();this._handleexecute=null;}if(this._handleopen){this._handleopen.remove();this._handleopen=null;}if(this._menuparented){this._menuparented.parentMenu=null;this._menuparented=null;}this.onHide();},onExecute:function(){}});});