//>>built
require({cache:{"url:idx/widget/templates/NavTree.html":"<div class=\"dijitTree ${idxBaseClass} dijitTreeContainer\" role=\"tree\">\r\n\t<div class=\"dijitInline dijitTreeIndent\" style=\"position: absolute; top: -9999px\" \r\n\t\t data-dojo-attach-point=\"indentDetector\"></div>\r\n</div>\r\n","url:idx/widget/templates/NavTreeNode.html":"<div class=\"dijitTreeNode\" role=\"presentation\"\r\n\t><div data-dojo-attach-point=\"rowNode\" class=\"dijitTreeRow dijitInline\" role=\"presentation\"\r\n\t\t><div data-dojo-attach-point=\"indentNode\" class=\"dijitInline\"></div\r\n\t\t><img src=\"${_blankGif}\" alt=\"\" data-dojo-attach-point=\"expandoNode\" class=\"dijitTreeExpando\" role=\"presentation\"\r\n\t\t/><span data-dojo-attach-point=\"expandoNodeText\" class=\"dijitExpandoText\" role=\"presentation\"\r\n\t\t></span\r\n\t\t><span data-dojo-attach-point=\"contentNode\"\r\n\t\t\tclass=\"dijitTreeContent\" role=\"presentation\">\r\n\t\t\t<span role=\"presentation\" data-dojo-attach-point=\"selectMarkerNode\" class=\"${idxBaseClass}SelectMarker\"\r\n\t\t\t></span><img src=\"${_blankGif}\" alt=\"\" data-dojo-attach-point=\"iconNode\" class=\"dijitIcon dijitTreeIcon\" role=\"presentation\"\r\n\t\t\t/><span data-dojo-attach-point=\"labelNode\" class=\"dijitTreeLabel\" role=\"treeitem\" tabindex=\"-1\" aria-selected=\"false\"></span\r\n\t\t\t><span data-dojo-attach-point=\"badgeNode\" class=\"${idxBaseClass}Badge\" id=\"${id}_badge\">\r\n\t\t    \t<img src=\"${_blankGif}\" alt=\"\" data-dojo-attach-point=\"badgeIconNode\" \r\n\t\t\t\t\t  class=\"dijitIcon ${idxBaseClass}BadgeIcon\" role=\"presentation\"\r\n\t\t \t\t/><span data-dojo-attach-point=\"badgeLabelNode\" class=\"${idxBaseClass}BadgeLabel\"></span>\r\n\t\t   </span\r\n\t\t></span\r\n\t></div>\r\n\t<div data-dojo-attach-point=\"containerNode\" class=\"dijitTreeContainer\" role=\"presentation\" style=\"display: none;\"></div>\r\n</div>\r\n"}});define("idx/widget/NavTree",["dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","dojo/aspect","dojo/dom-class","dojo/dom-construct","dijit/Tree","../util","../resources","../string","./NavTreeModel","dojo/text!./templates/NavTree.html","dojo/text!./templates/NavTreeNode.html","dojo/i18n!../nls/base","dojo/i18n!./nls/base","dojo/i18n!./nls/NavTree","idx/trees"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a,_b,_c,_d){var _e=(_7._TreeNode)?_7._TreeNode:_3.getObject("dijit._TreeNode");var _f=_1("idx.widget._NavTreeNode",[_e],{baseClass:"dijitTreeNode",idxBaseClass:"idxNavTreeNode",templateString:_d,badgeLabel:"",_setBadgeLabelAttr:function(_10){this.badgeLabel=_10;if(this.tree.model.badgeLabelType=="html"){var _11=(_10)?_10:"";this.badgeLabelNode.innerHTML=_11;}else{var _12=document.createTextNode((_10)?_10:"");_6.place(_12,this.badgeLabelNode,"only");}if(_a.nullTrim(this.badgeLabel)){_5.remove(this.badgeNode,this.idxBaseClass+"NoBadgeLabel");}else{_5.add(this.badgeNode,this.idxBaseClass+"NoBadgeLabel");}},_updateItemClasses:function(_13){this.inherited(arguments);var _14=this._badgeIconClass;this._badgeIconClass=this.tree.getBadgeIconClass(_13,this.isExpanded);if(_a.nullTrim(_14)){_5.remove(this.badgeIconNode,_14);_5.add(this.badgeNode,this.idxBaseClass+"NoBadgeIcon");}if(_a.nullTrim(this._badgeIconClass)){_5.remove(this.badgeNode,this.idxBaseClass+"NoBadgeIcon");_5.add(this.badgeIconNode,this._badgeIconClass);}else{_5.add(this.badgeNode,this.idxBaseClass+"NoBadgeIcon");}}});var _15=_1("idx.widget.NavTree",[_7],{baseClass:"dijitTree",idxBaseClass:"idxNavTree",showRoot:false,templateString:_c,showIcons:false,_setShowIconsAttr:function(_16){this.showIcons=_16;this._updateShowIconsClass();},showBadges:true,_setShowBadgesAttr:function(_17){this.showBadges=_17;this._updateShowBadgesClass();},iconMap:null,_setIconMapAttr:function(_18){this.iconMap=_18;if(!this._itemNodesMap){return;}for(var _19 in this._itemNodesMap){var _1a=this._itemNodesMap[_19];if(!_1a){continue;}for(var _1b=0;_1b<_1a.length;_1b++){var _1c=_1a[_1b];_1c._updateItemClasses(_1c.item);}}},badgeIconMap:null,_setBadgeIconMapAttr:function(_1d){this.badgeIconMap=_1d;if(!this._itemNodesMap){return;}for(var _1e in this._itemNodesMap){var _1f=this._itemNodesMap[_1e];if(!_1f){continue;}for(var _20=0;_20<_1f.length;_20++){var _21=_1f[_20];_21._updateItemClasses(_21.item);}}},highlightSelection:true,_setHighlightSelectionAttr:function(_22){this.highlightSelection=_22;this._updateHighlightSelectionClass();},lookupItemLabels:true,_setLookupItemLabelsAttr:function(_23){var _24=this.lookupItemLabels;this.lookupItemLabels=_23;if(this._started&&(_24!=_23)){for(var _25 in this._itemNodesMap){var _26=this._itemNodesMap[_25];if(_26){for(var _27=0;_27<_26.length;_27++){var _28=_26[_27];var _29=_28.get("item");var _2a=this.getLabel(_29);_28.set("label",_2a);}}}}},lookupBadgeLabels:true,_setLookupBadgeLabelsAttr:function(_2b){var _2c=this.lookupBadgeLabels;this.lookupBadgeLabels=_2b;if(this._started&&(_2c!=_2b)){for(var _2d in this._itemNodesMap){var _2e=this._itemNodesMap[_2d];if(_2e){for(var _2f=0;_2f<_2e.length;_2f++){var _30=_2e[_2f];var _31=_30.get("item");var _32=this.getBadgeLabel(_31);_30.set("badgeLabel",_32);}}}}},itemLabelKeyPrefix:"",itemLabelKeySuffix:"",badgeLabelKeyPrefix:"",badgeLabelKeySuffix:"",resources:null,_updateHighlightSelectionClass:function(){if(this.highlightSelection){_5.remove(this.domNode,this.idxBaseClass+"NoHighlight");}else{_5.add(this.domNode,this.idxBaseClass+"NoHighlight");}},_updateShowIconsClass:function(){if(this.showIcons){_5.remove(this.domNode,this.idxBaseClass+"HideIcons");}else{_5.add(this.domNode,this.idxBaseClass+"HideIcons");}},_updateShowBadgesClass:function(){if(this.showBadges){_5.remove(this.domNode,this.idxBaseClass+"HideBadges");}else{_5.add(this.domNode,this.idxBaseClass+"HideBadges");}},_updateTopLevelClasses:function(){this._updateShowIconsClass();this._updateShowBadgesClass();this._updateHighlightSelectionClass();},buildRendering:function(){this.inherited(arguments);this._updateTopLevelClasses();},postCreate:function(){this.inherited(arguments);var _33=this;this.dndController.singular=true;this.dndController._baseUserSelect=this.dndController.userSelect;this.dndController.userSelect=function(_34,_35,_36){if(!_33.model.isSelectable(_34.item)){return;}return this._baseUserSelect(_34,_35,_36);};this.dndController._baseSetSelection=this.dndController.setSelection;this.dndController.setSelection=function(_37){if(_37.length>1){return;}if((_37.length==1)&&(!_33.model.isSelectable(_37[0].item))){return;}return this._baseSetSelection(_37);};this.own(_4.after(this.model,"onBadgesChanged",_3.hitch(this,"_onBadgesChanged"),true));this.own(_4.after(this.model,"onSelectabilityChanged",_3.hitch(this,"_onSelectabilityChanged"),true));},_setPathsAttr:function(_38){if(!this._started){return this.inherited(arguments);}var _39=this.dndController.getSelectedTreeNodes();var _3a=this.inherited(arguments);_3a.then(_3.hitch(this,function(){var _3b=this.dndController.getSelectedTreeNodes();if(_39===_3b){return;}if(_39.length==_3b.length){this._onSelectionChanged();return;}for(var _3c=0;_3c<_3b.length;_3c++){if(_39[_3c]!==_3b[_3c]){this._onSelectionChanged();return;}}}));return _3a;},postMixInProperties:function(){_8.nullify(this,this.params,["itemLabelPrefix","itemLabelSuffix","badgeLabelPrefix","badgeLabelSuffix"]);this.inherited(arguments);this._defaultResources=_9.getResources("idx/widget/NavTree",this.lang);},_resetResources:function(){this._updateItemLabels();this._updateBadgeLabels();this._updateBadgeIconLabels();},_updateItemLabels:function(){},_updateBadgeLabels:function(){},_updateBadgeIconLabels:function(){},_resourceLookup:function(key){var _3d=null;if(this.resources){_3d=this.resources[key];}if(!_3d){_3d=this._defaultResources[key];}return _3d;},_getItemLabelKeyPrefix:function(){if(this.itemLabelKeyPrefix){return this.itemLabelKeyPrefix;}var _3e=this._resourceLookup("itemLabelKeyPrefix");return (_3e)?_3e:"navitem_";},_getItemLabelKeySuffix:function(){if(this.itemLabelKeySuffix){return this.itemLabelKeySuffix;}var _3f=this._resourceLookup("itemLabelKeySuffix");return (_3f)?_3f:"_label";},_getBadgeLabelKeyPrefix:function(){if(this.badgeLabelKeyPrefix){return this.badgeLabelKeyPrefix;}var _40=this._resourceLookup("badgeLabelKeyPrefix");return (_40)?_40:"badge_";},_getBadgeLabelKeySuffix:function(){if(this.badgeLabelKeySuffix){return this.badgeLabelKeySuffix;}var _41=this._resourceLookup("badgeLabelKeySuffix");return (_41)?_41:"_label";},getLabel:function(_42){var _43=this.inherited(arguments);if(!this.lookupItemLabels){return _43;}var _44=this._getItemLabelKeyPrefix();var _45=this._getItemLabelKeySuffix();var key=_44+_43+_45;var _46=this._resourceLookup(key);if(!_46){return _43;}return _46;},getBadgeLabel:function(_47){var _48=this.model.getBadge(_47);if((!_48)||((!_48.label)&&(!_48.iconType))){return "";}var _49=null;if(_48.label){var _4a=_8.typeOfObject(_48.label);if(_4a=="number"){return ""+_48.label;}_49=""+_48.label;}else{_49=""+_48.iconType;}if(!this.lookupBadgeLabels){return _49;}var _4b=this._getBadgeLabelKeyPrefix();var _4c=this._getBadgeLabelKeySuffix();var key=_4b+_49+_4c;var _4d=this._resourceLookup(key);if(!_4d){return _49;}return _4d;},getIconClass:function(_4e,_4f){if(!_4e){return this.idxBaseClass+"HiddenIcon";}var _50=this.model.getItemType(_4e);if(!_50){return this.inherited(arguments);}if((this.iconMap)&&(_50 in this.iconMap)){var _51=this.iconMap[_50];if(!_51){return this.idxBaseClass+"NoIcon";}var _52=_8.typeOfObject(_51);if(_52=="string"){return _51;}var _53=_51.leaf?_51.leaf:"";var _54=_51.open?_51.open:(_51.branch?_51.branch:"");var _55=_51.closed?_51.closed:(_51.branch?_51.branch:"");return (!_4e||this.model.mayHaveChildren(_4e))?(_4f?_54:_55):_53;}return this.inherited(arguments);},getBadgeIconClass:function(_56,_57){if(!_56){return null;}var _58=this.model.getBadge(_56);if((!_58)||(!_58.iconType)||(!this.badgeIconMap)||(!this.badgeIconMap[_58.iconType])){return null;}var _59=this.badgeIconMap[_58.iconType];var _5a=_8.typeOfObject(_59);if(_5a=="string"){return _59;}var _5b=_59.leaf?_59.leaf:"";var _5c=_59.open?_59.open:(_59.branch?_59.branch:"");var _5d=_59.closed?_59.closed:(_59.branch?_59.branch:"");return (!_56||this.model.mayHaveChildren(_56))?(_57?_5c:_5d):_5b;},_createTreeNode:function(_5e){var _5f=_5e.item;_5e.badgeLabel=this.getBadgeLabel(_5f);return new _f(_5e);},_onBadgesChanged:function(){for(var _60 in this._itemNodesMap){var _61=this._itemNodesMap[_60];if((_61)&&(_61.length>0)){var _62=_61[0].get("item");var _63=this.getBadgeLabel(_62);for(var _64=0;_64<_61.length;_64++){var _65=_61[_64];_65.set("badgeLabel",_63);_65._updateItemClasses(_65.item);}}}},_onSelectabilityChanged:function(){var _66=this.dndController.getSelectedTreeNodes();if((!_66)||(_66.length==0)){return;}var _67=false;for(var _68=0;_68<_66.length;_68++){var _69=_66[_68];var _6a=_69.get("item");var _6b=this.model.isSelectable(_6a);if(!_6b){this.dndController.removeTreeNode(_69);_67=true;}}if(_67){this._onSelectionChanged();}},_onItemChange:function(_6c){this.inherited(arguments);var _6d=this.model,_6e=_6d.getIdentity(_6c),_6f=this._itemNodesMap[_6e];var _70=this.model.isSelectable(_6c);var _71=false;if(_6f){var _72=this.getBadgeLabel(_6c);for(var _73=0;_73<_6f.length;_73++){var _74=_6f[_73];_74.set("badgeLabel",_72);if((!_70)&&this.dndController.isTreeNodeSelected(_74)){this.dndController.removeTreeNode(_74);_71=true;}}}if(_71){this._onSelectionChanged();}},_store2model:function(){this._v10Compat=true;_2.deprecated("Tree: from version 2.0, should specify a model object rather than a store/query");var _75={id:this.id+"_NavTreeModel",store:this.store,query:this.query,childrenAttrs:this.childrenAttr};if(this.params.mayHaveChildren){_75.mayHaveChildren=_3.hitch(this,"mayHaveChildren");}if(this.params.getItemChildren){_75.getChildren=_3.hitch(this,function(_76,_77,_78){this.getItemChildren((this._v10Compat&&_76===this.model.root)?null:_76,_77,_78);});}this.model=new _b(_75);this.showRoot=Boolean(this.label);},onClick:function(_79,_7a,evt){if(_79){if(this.model.isSelectable(_79)){this._onSelectionChanged(evt);}else{if(_7a.isExpandable){this._onExpandoClick({node:_7a});}}}},_onSelectionChanged:function(evt){var _7b=this.dndController.getSelectedTreeNodes();var _7c=[];if(!_7b){_7b=[];}for(var _7d=0;_7d<_7b.length;_7d++){var _7e=_7b[_7d];var _7f=_7e.get("item");_7c.push(_7f);}this.onSelectionChanged(_7c,_7b,this);},onSelectionChanged:function(_80,_81,_82){},normalizeItem:function(_83){return this.model.normalizeItem(_83);}});_15._NavTreeNode=_f;return _15;});