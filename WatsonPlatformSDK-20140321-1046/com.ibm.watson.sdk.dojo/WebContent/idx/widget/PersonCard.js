//>>built
require({cache:{"url:idx/widget/templates/PersonCard.html":"<div class=\"idxPersonCard\">\r\n\t<div dojoAttachPoint=\"containerNode\" class=\"idxPersonCardContainer\" tabindex=\"0\"></div>\r\n</div>\r\n"}});define("idx/widget/PersonCard",["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/html","dojo/_base/xhr","dojo/io/script","dijit/_Widget","dijit/_TemplatedMixin","dojo/text!./templates/PersonCard.html"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9){return _1("idx.widget.PersonCard",[_7,_8],{baseClass:"idxPersonCard",templateString:_9,url:"",jsonp:"",method:"POST",spec:["photo","fn","title","adr.work","tel.work","email.internet"],query:null,value:null,placeHolder:"&nbsp;",_setQueryAttr:function(_a){this.query=_a;this.containerNode.innerHTML="";if(_a&&this.url){this._load=(this._load||_2.hitch(this,this._setValueAttr));if(this.jsonp){_6.get({url:this.url,jsonp:this.jsonp,content:_a,load:this._load});}else{if(this.method){_5(this.method,{url:this.url,content:_a,load:this._load},this.method.toUpperCase()=="POST");}}}},_setValueAttr:function(_b){this.value=_b;this.containerNode.innerHTML="";if(_b&&this.spec){_3.forEach(this.spec,function(_c){this.render(_c,_b);},this);}},render:function(_d,_e){var _f=_d.split(".")[0];var _10=this.baseClass+_f.charAt(0).toUpperCase()+_f.substring(1);if(_d=="photo"){var alt=(_2.getObject("fn",false,_e)||"");_e=_2.getObject(_d,false,_e);_4.create("img",{src:_e,"class":_10,alt:alt},this.containerNode);}else{if(_d=="email.internet"){_e=_2.getObject(_d,false,_e);_4.create("a",{href:"mailto:"+_e,innerHTML:_e},_4.create("div",{"class":_10},this.containerNode));}else{if(_d=="sametime.awareness"){if(window&&window["sametime_loadAwareness"]){_e=_2.getObject("email.internet",false,_e);_4.create("a",{userId:_e,"class":"awareness",innerHTML:"&nbsp;",href:"javascript:;",role:"link",wairole:"link"},_4.create("div",{"class":_10},this.containerNode));sametime_loadAwareness();}else{_4.create("div",{"class":_10,innerHTML:this.placeHolder},this.containerNode);}}else{_e=_2.getObject(_d,false,_e);if(_f=="adr"){var adr=(_e.locality||"");if(_e.region){if(adr){adr+=", ";}adr+=_e.region;}_e=adr+" "+(_e.country_name||"");}else{if(_f=="fn"){var _11=_e.substring(0,_e.indexOf(","));var _12=_e.substring(_e.indexOf(",")+1);_e=_12+" "+_11;_e=_e.replace(/^\s*/,"").replace(/\s*$/,"");}}_4.create("div",{innerHTML:_e,"class":_10},this.containerNode);}}}}});});