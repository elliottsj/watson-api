//>>built
define("idx/widget/checkboxtree/_dndSelector",["dojo/_base/declare","dojo/_base/connect","dojo/_base/array","dojo/_base/lang","dojo/_base/event","dojo/_base/window","dojo/mouse","dijit/tree/_dndSelector"],function(_1,_2,_3,_4,_5,_6,_7,_8){return _1("idx.widget.checkboxtree._dndSelector",_8,{constructor:function(_9,_a){this.selection={};this.anchor=null;this.events.push(_2.connect(this.tree,"_onNodeStateChange",this,"_onNodeStateChange"),_2.connect(this.tree.domNode,"onmousedown",this,"onMouseDown"),_2.connect(this.tree.domNode,"onmouseup",this,"onMouseUp"),_2.connect(this.tree.domNode,"onmousemove",this,"onMouseMove"));},candidateNode:null,_setDifference:function(xs,ys){_3.forEach(ys,function(y){y.__exclude__=true;});var _b=_3.filter(xs,function(x){return !x.__exclude__;});_3.forEach(ys,function(y){delete y["__exclude__"];});return _b;},onMouseDown:function(e){if(!this.current){return;}if(!_7.isLeft(e)){return;}_5.stop(e);this.candidateNode=this.current;},onMouseUp:function(){this.candidateNode=null;},_onNodeStateChange:function(_c,_d){var _e=this.getSelectedTreeNodes();if(_e.length==1&&_e[0].checkboxNode.checked===false){this.selectNone();}if(_d==true){this.addTreeNode(_c,true);}else{if(this.selection[_c.id]){this.removeTreeNode(_c);}}}});});